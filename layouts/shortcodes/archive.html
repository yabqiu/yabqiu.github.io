{{/*

https://cpbotha.net/2021/01/10/super-simple-yearly-post-archives-hugo/

simple shortcode to display all posts in yearly sections on your archive page
by Charl P. Botha

this is a much simplified version of the yearly post archiving template at:
https://rohanverma.net/blog/2019/11/15/archive-pages-group-by-year-hugo/
// or
{{ $pages := where .Site.RegularPages "Type" "post" }} "in" (slice "post" "quartz") }}

if by year and month
{{ $grouped := $pages.GroupByDate "Jan 2006" }}
*/}}

{{ $pages := where .Site.RegularPages "Type" "post" }}
{{ $grouped := $pages.GroupByDate "2006" }}

{{ range $grouped }}
{{ $year := .Key }}
{{ $count := len .Pages }}

### {{ $year }} ({{ $count }})
{{ range .Pages }}
{{ .Date.Format "Jan 02" }} -- [{{ .Title }}]({{ .Permalink }})
{{ end }}
{{ end }}