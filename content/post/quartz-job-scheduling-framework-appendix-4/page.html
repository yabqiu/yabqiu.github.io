---
title: Quartz Job Scheduling Framework［翻译］附录 A. Quartz 配置参考 (第四部分)
url: /quartz-job-scheduling-framework-appendix-4/
date: 2009-01-08T07:23:00-06:00
featured: false
draft: false
toc: false
# menu: main
usePageBundles: true
categories:
  - Quartz
tags: 
  - Quartz
  - 翻译
comment: true
codeMaxLines: 50
# additional
wpPostId: 300 
wpStatus: publish
views: 1122
lastmod: 2010-08-10T10:31:06-05:00
---

<strong>八. 配置 <span style="color: #800080;">JobStoreTX </span><span style="color: #800080;">JobStore</span><br/>
</strong><br/>
<br/>
你可以像下面那样设定类名来选择 <span style="color: #800080;">JobStoreTX</span> 类：<br/>
<br/>
<span style="color: #800080;">org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX</span><br/>
<br/>
表 A.4 列出了配置 Quartz <span style="color: #800080;">JobStore</span> 的可用属性。只有少数几个属性是必须的，而且其他的都有合理的默认值。<!--more--><br/>
<table cellspacing="5" width="720"><caption><strong>表 A.4. 配置 Quartz JobStore 可用的属性</strong></caption><br/>
<tbody>

<tr>

<td width="140"><strong>名称</strong></td>

<td width="70"><strong>必须</strong></td>

<td width="80"><strong>类型</strong></td>

<td><strong>默认值</strong></td>

<td></td>

</tr>

<tr>

<td><span style="color: #800080;">org.quartz.jobStore.driverDelegateClass</span></td>

<td>是</td>

<td><span style="color: #800080;">String</span></td>

<td><span style="color: #800080;">null</span></td>

<td></td>

</tr>

<tr>

<td><span style="color: #800080;">org.quartz.jobStore.dataSource</span></td>

<td>是</td>

<td><span style="color: #800080;">String</span></td>

<td><span style="color: #800080;">null</span></td>

<td></td>

</tr>

<tr>

<td><span style="color: #800080;">org.quartz.jobStore.tablePrefix</span></td>

<td>否</td>

<td><span style="color: #800080;">String</span></td>

<td><span style="color: #800080;">QRTZ_</span></td>

<td></td>

</tr>

<tr>

<td><span style="color: #800080;">org.quartz.jobStore.useProperties</span></td>

<td>否</td>

<td><span style="color: #800080;">Boolean</span></td>

<td><span style="color: #800080;">false</span></td>

<td></td>

</tr>

<tr>

<td><span style="color: #800080;">org.quartz.jobStore.misfireThreshold</span></td>

<td>否</td>

<td><span style="color: #800080;">Integer</span></td>

<td><span style="color: #800080;">60000</span></td>

<td></td>

</tr>

<tr>

<td><span style="color: #800080;">org.quartz.jobStore.isClustered</span></td>

<td>否</td>

<td><span style="color: #800080;">Boolean</span></td>

<td><span style="color: #800080;">false</span></td>

</tr>

<tr>

<td><span style="color: #800080;">org.quartz.jobStore.clusterCheckinInterval</span></td>

<td>否</td>

<td><span style="color: #800080;">Long</span></td>

<td><span style="color: #800080;">15000</span></td>

<td></td>

</tr>

<tr>

<td><span style="color: #800080;">org.quartz.jobStore.maxMisfiresToHandleAtATime</span></td>

<td>否</td>

<td><span style="color: #800080;">Integer</span></td>

<td><span style="color: #800080;">20</span></td>

<td></td>

</tr>

<tr>

<td><span style="color: #800080;">org.quartz.jobStore.dontSetAutoCommitFalse</span></td>

<td>否</td>

<td><span style="color: #800080;">Boolean</span></td>

<td><span style="color: #800080;">false</span></td>

<td></td>

</tr>

<tr>

<td><span style="color: #800080;">org.quartz.jobStore.selectWithLockSQL</span></td>

<td>否</td>

<td><span style="color: #800080;">String</span></td>

<td><span style="color: #800080;">"SELECT * FROM {0} LOCKS WHERE LOCK_NAME = ? FOR UPDATE"</span></td>

<td></td>

</tr>

<tr>

<td><span style="color: #800080;">org.quartz.jobStore.txIsolationLevelSerializable</span></td>

<td>否</td>

<td><span style="color: #800080;">Boolean</span></td>

<td><span style="color: #800080;">false</span></td>

<td></td>

</tr>

</tbody>

</table>

<strong><span style="color: #800080;"><br/>
·org.quartz.jobStore.driverDelegateClass</span></strong><br/>
<br/>
Quartz 通过一个代理可以使用大部分流行的数据库平台。这里是 <span style="color: #800080;">org.quartz.jobStore.driverDelegateClass</span> 属性允许的值：<br/>
<br/>
<span style="color: #800080;">    ·org.quartz.impl.jdbcjobstore.StdJDBCDelegate</span><br/>
<br/>
<span style="color: #800080;">    ·org.quartz.impl.jdbcjobstore.MSSQLDelegate</span><br/>
<br/>
<span style="color: #800080;">    ·org.quartz.impl.jdbcjobstore.PostgreSQLDelegate</span><br/>
<br/>
<span style="color: #800080;">    ·org.quartz.impl.jdbcjobstore.WebLogicDelegate (for WebLogic drivers)</span><br/>
<br/>
<span style="color: #800080;">    ·org.quartz.impl.jdbcjobstore.oracle.OracleDelegate</span><br/>
<br/>
<span style="color: #800080;">    ·org.quartz.impl.jdbcjobstore.oracle.WebLogicOracleDelegate</span><br/>
<br/>
<span style="color: #800080;">    ·org.quartz.impl.jdbcjobstore.oracle.weblogic.WebLogicOracleDelegate</span><br/>
<br/>
<span style="color: #800080;">    ·org.quartz.impl.jdbcjobstore.CloudscapeDelegate</span><br/>
<br/>
<span style="color: #800080;">    ·org.quartz.impl.jdbcjobstore.DB2v6Delegate</span><br/>
<br/>
<span style="color: #800080;">    ·org.quartz.impl.jdbcjobstore.DB2v7Delegate</span><br/>
<br/>
<span style="color: #800080;">    ·org.quartz.impl.jdbcjobstore.HSQLDBDelegate</span><br/>
<br/>
<span style="color: #800080;">    ·org.quartz.impl.jdbcjobstore.PointbaseDelegate<br/>
</span><br/>
<strong><span style="color: #800080;">·org.quartz.jobStore.dataSource</span></strong><br/>
<br/>
这个属性的值必须是本附录接下来的 <span style="color: #800080;">DataSource</span> 配置中定义的 <span style="color: #800080;">DataSource</span> 的名称。<br/>
<br/>
<span style="color: #800080;"><strong>·org.quartz.jobStore.tablePrefix</strong></span><br/>
<br/>
表前缀属性是作为在你的数据库中创建 Quartz 表的表名的前缀。如果你使用不同的表前缀，你就能够在同一个数据库中拥有多套 Quartz 表。<br/>
<br/>
<strong><span style="color: #800080;">·org.quartz.jobStore.useProperties</span></strong><br/>
<br/>
"使用属性" 设置指示着 JDBC <span style="color: #800080;">JobStore</span> 所有在 <span style="color: #800080;">JobDataMap</span> 中的值会是字符串，因此，它们可以名-值对来存储，而无需把更复杂的对象以序列化的形式存储在 BLOB 列中。这样做很有好处的，因为避免了伴随着序列化非字符串类到 BLOB 时产生的类版本问题。<br/>
<br/>
<strong><span style="color: #800080;">·org.quartz.jobStore.misfireThreshold</span></strong><br/>
<br/>
设定这个属性为一个毫秒数，Scheduler 允许一个 Triiger 在超过它的下次触发时多少毫秒才算是错过触发。默认值是 60000 (60 秒)。<br/>
<br/>
<strong><span style="color: #800080;">·org.quartz.jobStore.isClustered</span></strong><br/>
<br/>
设置为 <span style="color: #800080;">true</span> 来打开集群特性。假如你正使用多个 Quartz 实例且用的是同一套数据库表的话，这个属性必须设置为 <span style="color: #800080;">true</span>。<br/>
<br/>
<strong><span style="color: #800080;">·org.quartz.jobStore.clusterCheckinInterval<br/>
</span></strong><br/>
设置当前实例检查集群中的其他实例的频度 (毫秒)。这个值会影响侦测失败实例的灵敏性。<br/>
<br/>
<strong><span style="color: #800080;">·org.quartz.jobStore.maxMisfiresToHandleAtATime<br/>
</span></strong><br/>
这是设定 <span style="color: #800080;">JobStore</span> 同一时刻能处理错过触发 Trigger 的最大数量。一次同时处理太多(超过数十个)的话，会导致数据库表被锁定过长的时间，从而影响到了触发其他的(还未错过触发) Trigger 的性能。<br/>
<br/>
<strong><span style="color: #800080;">·org.quartz.jobStore.dontSetAutoCommitFalse<br/>
</span></strong><br/>
设置这一参数为 <span style="color: #800080;">true</span> 是告诉 Quartz 别调用从 <span style="color: #800080;">DataSource</span> 处获取的连接的 <span style="color: #800080;">setAutoCommit(false)</span> 方法。这在一些情况下是有帮助的，比如可能你有某个驱动在连接关闭的时候是不允许调用该方法的。这个属性默认为 <span style="color: #800080;">false</span>，因为多数驱动是需要调用 <span style="color: #800080;">setAutoCommit(false)</span> 方法的。<br/>
<br/>
<strong><span style="color: #800080;">·org.quartz.jobStore.selectWithLockSQL</span></strong><br/>
<br/>
这必须为一个 SQL 字符串，用来从 <span style="color: #800080;">LOCKS</span> 表中查询一条记录并在其中加锁。倘若未予设置，默认为 <span style="color: #800080;">SELECT * FROM {0}LOCKS WHERE LOCK_NAME = ? FOR UPDATE</span>, 这可在多数数据库中正常工作。{0} 会在运行时替代为你早先配置的 <span style="color: #800080;">TABLE_PREFIX</span> 属性。<br/>
<br/>
<strong><span style="color: #800080;">·org.quartz.jobStore.txIsolationLevelSerializable</span></strong><br/>
<br/>
值为 <span style="color: #800080;">true</span> 是告诉 Quartz (当使用 <span style="color: #800080;">JobStoreTX</span> 或是 <span style="color: #800080;">CMT</span> 的时候) 去调用 JDBC 连接的 <span style="color: #800080;">setTransactionIsolation(Connection.TRANSACTION_SERIALIZABLE)</span> 方法。这对于避免某些数据库在高负载及长事物发生时的锁超时是有帮助的。
