---
title: C++的头文件中类声明后忘记加分号产生不可预期的编译错误
url: /cpp-header-semicolon-expected/
date: 2006-08-08T00:23:00-05:00
featured: false
draft: false
toc: false
# menu: main
usePageBundles: true
thumbnail: "../images/logos/cpp-logo.png"
categories:
  - C++/VB
tags: 
  - C#
comment: true
codeMaxLines: 50
# additional
wpPostId: 556 
wpStatus: publish
views: 823
lastmod: 2019-11-06T23:08:22-06:00
---

<table style="border-collapse: collapse;" border="1" width="100%" cellspacing="2" cellpadding="2">
<tbody>
<tr>
<td width="50%">头文件 Test.h 的内容是<br />
class Test<br />
{<br />
public:<br />
 virtual void test1();<br />
}</td>
<td>实现文件是 Test.cpp<br />
#include "Test.h"<br />
#include &lt;iostream&gt;<br />
using namespace std;<br />
void Test::test1(){  cout&lt;&lt;"Hello"&lt;&lt;endl; }</td>
</tr>
</tbody>
</table>
<br/>
编译时出现错误<br />
c:\program files\microsoft visual studio\vc98\include\errno.h(29) : error C2143: syntax error : missing ';' before 'string'<!--more--><br />
c:\program files\microsoft visual studio\vc98\include\errno.h(29) : fatal error C1004: unexpected end of file found</p>
<br/>
不把这两个文件连接起来考虑是很难知道是那里错了,况且Unmi原来又是写java比C++多得多，java可没有#include的用法，其实有C++经验的人，明白了#include只是把被包含文件的内容引入到当前位置。<br />
上面把Test.h的内容插入到Test.cpp文件中#include "Test.h"处，那就要注意了，类声明后必须要加上一个分号，可以把类声明当成是普通的变量声明语句一样，需要一分号结束，不然会出现许多不可预知的编译错误<br/><br/>
错误类型并非就是只出现上面那样，主要看头文件内容引入到当前位置后，与随后语句差一个分号会出现什么语法错误，所以应该养成类声明后加分好的习惯就不会错的。<br/><br/>
比如实现文件写成<br />
#include "Test.h"<br />
void Test::test1(){}<br/><br/>
出现的错误就是<br/><br/>
#include "Test.h"<br />
void Test::test1(){}<br />
C:\Documents and Settings\yanbin\My Documents\Visual Studio Projects\TestVirtual\Test.cpp(3) : error C2628: 'Test' followed by 'void' is illegal (did you forget a ';'?)<br />
C:\Documents and Settings\yanbin\My Documents\Visual Studio Projects\TestVirtual\Test.cpp(3) : error C2556: 'class Test __thiscall Test::test1(void)' : overloaded function differs only by return type from 'void __thiscall Test::test1(void)'<br />
        c:\documents and settings\yanbin\my documents\visual studio projects\testvirtual\test.h(4) : see declaration of 'test1'<br />
C:\Documents and Settings\yanbin\My Documents\Visual Studio Projects\TestVirtual\Test.cpp(3) : error C2371: 'test1' : redefinition; different basic types<br />
        c:\documents and settings\yanbin\my documents\visual studio projects\testvirtual\test.h(4) : see declaration of 'test1'<br/><br/>
因为编译器看到了头文件的类声明与语句　void Test::test1(){}　之间没有分号。
