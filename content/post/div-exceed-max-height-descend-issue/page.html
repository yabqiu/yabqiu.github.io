---
title: div 中动态添加的内容超过它的高度时造成 div 显示下沉的解决
url: /div-exceed-max-height-descend-issue/
date: 2009-04-28T03:38:00-05:00
featured: false
draft: false
type: post
toc: false
# menu: main
usePageBundles: true
categories:
  - Web/JS
tags: 
  - html
  - div
comment: true
codeMaxLines: 50
# additional
wpPostId: 278 
wpStatus: publish
views: 1495
lastmod: 2021-09-02T11:42:12-05:00
---

有一个页面展示上的需求是：固定长宽的 &lt;div&gt; 中放置一个表格，点击按钮向表格中动态添加行，当表格显示大小超过 &lt;div&gt; 的设定时，&lt;div&gt; 出现滚动条(包括横向和纵向)，&lt;div&gt; 的大小和位置始终不变。</p>
<br/>
可是这样简单的代码随性写来却有个问题，当表格的高度未超过 &lt;div&gt; 高度时正常，而超过到一定程度时会造成 &lt;div&gt; 在页面中显示下沉。<br/><br/>
示例代码如下(点击 Load Data 按钮加载数据)：<!--more--><br/>
{{< highlight html >}}
<button onclick="loadData()">Load Data</button>
<div  style="width:160;height:100;overflow:auto;border-width:1px;border-style:solid">
    <table width="100%" id="dataTable" align="center" border=1 style="border-collapse:collapse">
        <tr>
            <td  style="font-weight:bold">No.</td>
            <td  style="font-weight:bold">Name</td>
        </tr>
    </table>
</div><br/><br/>
<script>
    function loadData(){
        for(var i=1;i<=3;i++){
           var newRow = document.getElementById('dataTable').insertRow();
           var newCell1 = newRow.insertCell();
           newCell1.innerText = i;
           var newCell2 = newRow.insertCell();
           newCell2.innerText = 'Unmi';
        }
    }
</script>
{{</ highlight >}}
<br/>
下面是点击 "Load Data" 按钮后的效果：<br/><br/>
<table border="0" align="center">
<tbody>
<tr valign="top">
<td>初始时 {{< bundle-image div_table_1.jpg 173 >}}</td>
<td>第一次点击，加载三条记录 {{< bundle-image div_table_2.jpg 173 >}} </td>
<td>第二次点击，加载六条记 {{< bundle-image div_table_3.jpg 173 >}}</td>
<td>第三次点击，加载九条记录 {{< bundle-image div_table_4.jpg 173 >}} </td>
</tr>
</tbody>
</table>
从上图可以看到 &lt;div&gt; 在慢慢往下走，离按钮越来越远。实际上这时候你把由 JS 生成的源文件保存下来显示是正常的。<br/><br/>
解决办法有四：<br/><br/>
1、2. 给 &lt;div&gt; 加上 vertical-align:middle 或者 float:left 样式<br />
3、4. 给 &lt;table&gt; 加上 vertical-align:middle 或者 float:left 样式<br/><br/>
参考：1. <a href="http://topic.csdn.net/u/20090423/10/afb9b519-2148-4f88-bf99-fc2aee220546.html?647136483">http://topic.csdn.net/u/20090423/10/afb9b519-2148-4f88-bf99-fc2aee220546.html?647136483</a><br />
即 CSDN 网友给的答案。
