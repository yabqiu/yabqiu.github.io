---
title: 终于解决了自己的博客页面显示像蜗牛的问题
url: /blog-too-slow/
date: 2006-09-08T13:12:00-05:00
featured: false
draft: false
toc: false
# menu: main
usePageBundles: true
categories:
  - Gossip
tags: 
comment: true
codeMaxLines: 50
# additional
wpPostId: 746 
wpStatus: publish
views: 284
lastmod: 2010-08-22T05:57:11-05:00
---

今天晚上，忙了好一阵把中国博客网一多篇文章挪到博客天中去，因为几乎半年以来，我现在这个博客网打开页面都无比的慢，相信任何人都无法忍受，一直都是以为中国博客网就是很慢的，也没太在意为什么别人在中国博客网上的博客也很快的。<br/>
<br/>
也试过学着博客天下默认方式那样，每篇文章显示前约500字，再看看首页，并没明显示改善，况且进入完整内容页总还是如此之慢的，补充这里可能慢的概念，可能20分钟后还看不到内容。<!--more--><br/>
<br/>
往博客天下移了好几篇文章后，忽又想改改博客天下里的模板，也加上<span style="color: #804040;">&lt;</span><span style="color: #000000;">script <span style="color: #000000;">type<span style="color: #804040;">=<span style="color: #dc009c;">"text/javascript" <span style="color: #000000;">language<span style="color: #804040;">=<span style="color: #dc009c;">"Javascript" <span style="color: #000000;">src<span style="color: #804040;">=<span style="color: #dc009c;">"http://data.booso.com/referrer.GBK"<span style="color: #804040;">&gt;</span></span></span></span></span></span></span></span></span></span></span>，可获知看客从哪链接而，完之后，再一打博客天下的首页 <a href="http://unmi.blog.com.cn">http://unmi.blog.com.cn</a>, 发觉此时也并不像先前那么快了，顿时我就意识到问题就出在这儿了。原来我这里的博客之所以慢，完全是由于网页一直在等待 <span style="color: #804040;">&lt;</span><span style="color: #000000;">script <span style="color: #000000;">type<span style="color: #804040;">=<span style="color: #dc009c;">"text/javascript" <span style="color: #000000;">language<span style="color: #804040;">=<span style="color: #dc009c;">"Javascript" <span style="color: #000000;">src<span style="color: #804040;">=<span style="color: #dc009c;">"http://data.booso.com/referrer.GBK"<span style="color: #804040;">&gt;</span></span></span></span></span></span></span></span></span></span></span>　这段脚本的执行结束，于是修改这里的模板，把这段代码提出下面的大表格，放在最后面，只在原处留个 DIV 标记，待到这段脚本执行完后，再把它的输出（也就是所有看客来源）拷贝到上面那个标记处（还是原来显示之处）。<br/>
<br/>
处理方式与原来的访问统计一样的，只是原来知道访问统计会影响到页面的加载显示，没留心显示"从哪儿来"才是罪魁祸首。具体做法：<br/>
<br/>
1. 在原来做个标记：<span style="color: #804040;">&lt;</span><span style="color: #000000;">div <span style="color: #000000;">align<span style="color: #804040;">=<span style="color: #dc009c;">"center" <span style="color: #000000;">id<span style="color: #804040;">=<span style="color: #dc009c;">"SourceArea"<span style="color: #804040;">&gt;<span style="color: #949400;">数据读取中……<span style="color: #804040;">&lt;<span style="color: #804040;">/<span style="color: #000000;">div<span style="color: #804040;">&gt;</span></span></span></span></span></span></span></span></span></span></span></span></span><br/>
<br/>
2. 内容表格外加载，然后拷贝输出到标记处：<br/>
<br/>
<span style="color: #804040;">&lt;</span><span style="color: #000000;">div <span style="color: #000000;">style<span style="color: #804040;">=<span style="color: #dc009c;">"display:none;visibility:hidden"<span style="color: #804040;">&gt;<br/>
    <span style="color: #804040;">&lt;<span style="color: #000000;">div <span style="color: #000000;">align<span style="color: #804040;">=<span style="color: #dc009c;">"left" <span style="color: #000000;">id<span style="color: #804040;">=<span style="color: #dc009c;">"SourceAreaTemp"<span style="color: #804040;">&gt;<br/>
        <span style="color: #804040;">&lt;<span style="color: #000000;">script <span style="color: #000000;">type<span style="color: #804040;">=<span style="color: #dc009c;">"text/javascript" <span style="color: #000000;">language<span style="color: #804040;">=<span style="color: #dc009c;">"Javascript" <span style="color: #000000;">src<span style="color: #804040;">=<span style="color: #dc009c;">"http://data.booso.com/referrer.GBK"<span style="color: #804040;">&gt;<span style="color: #804040;">&lt;<span style="color: #804040;">/<span style="color: #000000;">script<span style="color: #804040;">&gt;<br/>
    <span style="color: #804040;">&lt;<span style="color: #804040;">/<span style="color: #000000;">div<span style="color: #804040;">&gt;<br/>
<span style="color: #804040;">&lt;<span style="color: #804040;">/<span style="color: #000000;">div<span style="color: #804040;">&gt;<br/>
<span style="color: #804040;">&lt;<span style="color: #000000;">script<span style="color: #804040;">&gt;<br/>
        <strong><span style="color: #0000ff;">var</span></strong><span style="color: #000000;">sourceArea <span style="color: #804040;">= <span style="color: #000000;">document<span style="color: #000000;">.<span style="color: #000000;">getElementById<span style="color: #ff0000;">(<span style="color: #dc009c;">"SourceArea"<span style="color: #ff0000;">)<span style="color: #000000;">;<br/>
        <strong><span style="color: #0000ff;">var</span></strong><span style="color: #000000;">sourceAreaTemp <span style="color: #804040;">= <span style="color: #000000;">document<span style="color: #000000;">.<span style="color: #000000;">getElementById<span style="color: #ff0000;">(<span style="color: #dc009c;">"SourceAreaTemp"<span style="color: #ff0000;">)<span style="color: #000000;">;<br/>
        <strong><span style="color: #0000ff;">if</span></strong><span style="color: #ff0000;">(<span style="color: #000000;">sourceArea<span style="color: #ff0000;">)<br/>
        <span style="color: #ff0000;">{<br/>
                <span style="color: #000000;">sourceArea<span style="color: #000000;">.<span style="color: #000000;">style<span style="color: #000000;">.<span style="color: #000000;">textAlign <span style="color: #804040;">= <span style="color: #dc009c;">"left"<span style="color: #000000;">;<br/>
                <span style="color: #000000;">sourceArea<span style="color: #000000;">.<span style="color: #000000;">innerHTML <span style="color: #804040;">= <span style="color: #000000;">sourceAreaTemp<span style="color: #000000;">.<span style="color: #000000;">innerHTML<span style="color: #000000;">;<br/>
        <span style="color: #ff0000;">}<br/>
<span style="color: #804040;">&lt;<span style="color: #804040;">/<span style="color: #000000;">script<span style="color: #804040;">&gt;</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><br/>
<br/>
保存模板后，刷新一下首页面，迅速，兴奋，激动不已，老大难题算是到此为止，于是赶紧把所有的日志都刷新一下应用新的模板。以后肯定会更多的朋友能够亲眼目睹我的博客，而不是无可奈何之后拂袖而去。也不再想要把这儿的日志往博客天下挪了，好生专心的把这儿经营好，博客天下上传些文件还是不错的。<br/>
<br/>
说明：我现在选用了这个模板页面是分两大块加载显示，上部份页头，原来出奇慢时只能见首，然后是体。每部份都是一个大表格，因为页面的显示方式是，只有等表格的所以内容加载完成才显示全部内容，否则什么也看不到。所以把慢的拉到表格外来，放在页尾就不会耽误到整个页的显示，其余就做 JavaScript 操作了。<br/>
<br/>
现在也不会埋怨中国博客网太慢，那段脚本本来就是自己给自己下的套，只是那些迷糊了。也算是体验到了，软件的80%的性能瓶颈是由2%的代码引发的，远不是二八法则所能表达的。
