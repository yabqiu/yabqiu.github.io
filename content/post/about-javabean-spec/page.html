---
title: 关于 JavaBean 规范你还是应该知道的二三事
url: /about-javabean-spec/
date: 2009-07-01T09:19:00-05:00
featured: false
draft: false
type: post
toc: false
# menu: main
usePageBundles: true
categories:
  - Java/JEE
tags: 
  - Java
  - JavaBean
comment: true
# additional
wpPostId: 252 
wpStatus: publish
views: 686
lastmod: 2010-08-10T09:07:35-05:00
---

作为 Java  程序员，对于 JavaBean 也许你会说再熟悉不过了，它贯穿在系统的多层中，不同的叫法有 PO、VO、DTO、POJO、DO(Domain Object)。然而它无外乎就是一个 Class 类，带上些属性和它们的 setter/getter 方法，set/get 后面那一个字母大写。虽然我们现在很少把 JavaBean 与那个古老的 2.0 的 EJB 搞混，但为什么明明用 IDE 为属性生成的 getter/setter 方法，应用一运行，还是报找不到某个 bean 属性的 setter 或 getter 方法呢？<br/>
<br/>
要知道，在 Sun 的网站上那个关于 JavaBean 规范的 PDF 文档可是有足足实实的 114 页啊。难免有些规则有点古怪，至使知名的 IDE 都难以应对，所以我们还是有必要了解其中二三，来规范我们的 JavaBean 和解释一些情形。<br/>
<br/>
Sun  的关于 JavaBean 规范见：<a href="http://java.sun.com/javase/technologies/desktop/javabeans/docs/spec.html">http://java.sun.com/javase/technologies/desktop/javabeans/docs/spec.html</a>，其中可下载到 JavaBean 规范的  PDF 文档。<!--more--><br/>
<br/>
<span style="color: #000080;"><strong><span style="color: #0000ff;">
<span style="font-size: medium;">实际中的问题</span></span></strong><br/>
</span><br/>
首先，当然还是要说它的属性及 setter/getter 方法。属性以小写字母开头，驼峰命名格式，相应的 getter/setter 方法是 get/set 接上首字母大写的属性名。多数情况是对的，且当前流行的 IDE(Eclipse、JBuilder) 也都认这个死理，这里 NetBean 值得表扬一下。但要是碰到些遗留的代码中属性名不规范，或者有些人就是顽固，或真是对属性命名犹豫不决时的写下的代码时，那还是有得你研究一下。<br/>
<br/>
这里来看看 Eclipse 为几个属性生成的 getter/setter 方法吧：<br/>
<br/>
sName(从 C 转过来的，受匈牙利的影响，认为 Name 是个字符串，所以加个前缀 s)           getSName()/setSName(String name)<br/>
URL (平时认为是缩略语/专有名词，理当全部大写，这在我们对待 ID 时经常发生的)           getURL()/setURL(String url)<br/>
<br/>
上面第一个由 Eclipse 为我们生成的 getSName()/setSName(String name) 方法，参照 JavaBean  规范来说，其实是错误的。如果出现这样的方法，放到我们的标签(像 Struts 标签，如 &lt;s:textfield name="sName"/&gt;)，或是进行 Hibernate/iBatis 那种映射时，你就能收到报 <span style="color: #ff0000;">找不到 sName 属性相应的 getter/setter 方法</span> 那样的错误。不是明明有 getSName() 和 setSName(String name)，可是方法名错了，正确的版本应该是 getsName() 和 setsName(String name)。<br/>
<br/>
前面首先解释了属性命名不规范产生问题的原因，现在就来更仔细的了解关于 JavaBean 属性及其 getter/setter 方法的约定，有些是硬性的。<br/>
<br/>
<strong><span style="color: #0000ff;">
<span style="font-size: medium;">属性与存取访问的规定</span></span></strong><br/>
<br/>
为 JavaBean 创建属性时，必须牢记：缩略语通常被视为一个独立的单词，而不是单个字母。例如，URL 对应的属性名应该用 url，相应的 getUrl()/setUrl()，所以 ID 还是用 id 作为属性吧，相应的 getId()/setId()。<br/>
<br/>
规范中另一个特别的地方就是，第二个字母为大写的属性名要区别对待。如果属性名的第二个字母是大写的，那么该属性名直接用作 getter/setter 方法中
get/set 的后部分，就是说大小写不变。这就是为什么 sName 对应的存取方法是 getsName()/setsName() 的原因，不能不说这条规则很令人费解。
那就更有必要看看下面表格的规范：<br/><br/>
<table style="border-collapse: collapse;" border="1" width="75%" align="center" bordercolor="black">

<tbody>

<tr>

<td><strong>属性名/类型</strong></td>

<td><strong>getter 方法</strong></td>

<td><strong>setter 方法</strong></td>

</tr>

<tr>

<td>xcoordinate/Double</td>

<td>public Double getXcoordinate()</td>

<td>public void setXcoordinate(Double newValue)</td>

</tr>

<tr>

<td>xCoordinate/Double</td>

<td>public Double getxCoordinate()</td>

<td>public void setxCoordinate(Double newValue)</td>

</tr>

<tr>

<td>XCoordinate/Double</td>

<td>public Double getXCoordinate()</td>

<td>public void setXCoordinate(Double newValue)</td>

</tr>

<tr>

<td>Xcoordinate/Double</td>

<td>不允许</td>

<td>不允许</td>

</tr>

<tr>

<td>student/Boolean</td>

<td>public Boolean getStudent()</td>

<td>public void setStudent(Boolean newValue)</td>

</tr>

<tr>

<td>student/boolean</td>

<td>public boolean getStudent()<br/>
public boolean isStudent()</td>

<td>public void setStudent(boolean newValue)</td>

</tr>

</tbody>

</table>

属性是首字母大写，次字母小写是，你永远都找不到它的 getter/setter 方法的，对这个属性的使用是会害人的。对于 boolean 类型属性的 getter 方法是 isXxx() 还是 getXxx() 就自己决定了，isXxx() 应该更接近于自然语言，更顺溜些。<br/>
<br/>
知道了属性及存取方法的规定，那么你即使是面对古老代码，在使用标签来引用或与 Hibernate/iBatis 等进行映射，你就知道该填什么样的属性名了。<br/>
<br/>
还有一个我们很少碰触到的是关于可索引属性的 getter/setter 方法(这方面 C# 表现的比 Java 要优秀)，比如有属性<br/>
 <br/>
private  OrderItem[] orderItem;      那它相应的 getter/setter 除常见的两个外，还有带索引参数的两个版本，如下：<br/>
<br/>
public OrderItem[] getOrderItem();<br/>
public void setOrderItem(OrderItem[] newArray);<br/>
public OrderItem[] getOrderItem(int index);<br/>
public void setOrderItem(int index, OrderItem orderItem);<br/>
<br/>
<strong>
<span style="color: #0000ff; font-size: medium;">关于 Bean 导航</span></strong><br/>
<br/>
最后就是 Bean 导航的规范，通常用点记法(dot notation) 来引用属性，同时也要注意索引属性的访问。在 Web MVC 的表单中，以及标签中，
Jarkata-Commons-BeanUtils  中用得很多。看点记法的示例：<br/><br/>
<table style="border-collapse: collapse;" border="1" width="75%" align="center" bordercolor="black">

<tbody>

<tr>

<td><strong>Java 代码</strong></td>

<td><strong>点记法</strong></td>

</tr>

<tr>

<td>anOrder.getAccount().getUsername()</td>

<td>anOrder.account.username</td>

</tr>

<tr>

<td>anOrder.getOrderItem().get(0).getProductId()</td>

<td>anOrder.orderItem[0].productId</td>

</tr>

<tr>

<td>anObject.getId()</td>

<td>anObject.id</td>

</tr>

<tr>

<td>anObject.getxCoordinate()</td>

<td>anObject.xCoordinate</td>

</tr>

</tbody>

</table>

上表应该从右往左边看，点记法中的属性名运行时要被解析成相应的存取方法调用。比如像 Struts1 标签：<br/>
<strong><span class="tag"><span style="color: #0000ff;"><br/>
&lt;</span></span><span class="tag-name"><span style="color: #7f0055;">html:text</span></span></strong><span> </span><span class="attribute"><span style="color: #ff0000;">property</span></span><span>=</span><span style="color: #0000ff;"><span class="attribute-value">"stocks[1].code"</span><span class="tag"><strong>/&gt;</strong></span><span class="tag"><strong><br/>
</strong><span style="color: #000000;"><br/>
会显示出 FormBean 中 stocks 列表的第二个元素的 code 属性，提交就填充到相应的位置上去。</span></span></span>
