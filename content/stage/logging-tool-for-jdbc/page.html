---
title: Logging tool for JDBC
url: /logging-tool-for-jdbc/
date: 2010-03-30T23:18:00-05:00
featured: false
draft: false
type: post
toc: false
# menu: main
usePageBundles: true
categories:
  - Java/JEE
  - Database
tags: 
  - JDBC
  - Log
comment: true
codeMaxLines: 50
# additional
wpPostId: 209 
wpStatus: publish
views: 419
lastmod: 2012-03-09T23:18:32-06:00
---

jdbcdslog 是一款知名用来跟踪 JDBC 的全功能工具.<br/>
<br/>
特征包括:<br/>
- 可挂接到数据库连接,&nbsp;驱动或数据源上(XA,&nbsp;连接池)<br/>
- 可记录 PreparedStatement&nbsp;和 CallableStatement 调用所绑定的参数<br/>
- 可记录 ResultSet 对象中的查询记录行<br/>
- 可记录查询执行时间<br/>
- 支持多种日志引擎 (感谢 SLF4J, 你可以使用多数流行的日志组件库, 像&nbsp;log4j, apache common logging, java logging&nbsp;或者简单的输出到 System.out)<!--more--><br/>
<br/>
你有三种选择去配置日志代理:<br/>
<br/>
- 在你的代码中包裹 JDBC 连接.<br/>
用下面那样的构造方式:<br/>
Connection loggingConnection = ConnectionLoggingProxy.wrap(originalConnection);<br/>
<br/>
- 配置 JDBC Driver 的日志代理.<br/>
在这种方法中，你必须使用 org.jdbcdslog.DriverLoggingProxy&nbsp;来替代你原本的 JDBC Driver 类，并使用 jdbcdslog 的&nbsp;URL&nbsp;格式，原连接的 URL 作为它的参数:<br/>
jdbc:jdbcdslog:;targetDriver=<br/>
<br/>
-&nbsp;配置 JDBC&nbsp;数据源日志代理.<br/>
<br/>
这种方式下，你需要使用 org.jdbcdslog.ConnectionPoolXADataSourceProxy 类来替代你自己的 DataSource 实现类, 还要传递一个值为 DataBase 或 URL 的附加参数 targetDS&nbsp;作为新的 DataSource 的配置项.<br/>
<br/>
更多信息和配、配置实例、jar 文件和源代码，请参看该项目的网站: <a href="http://code.google.com/p/jdbcdslog/">http://code.google.com/p/jdbcdslog/</a>.<br/>
<br/>
Translate from: <a href="http://www.theserverside.com/news/thread.tss?thread_id=59817">http://www.theserverside.com/news/thread.tss?thread_id=59817</a><br/>
<br/>
<hr /><br/>
<br/>
<strong><br/>
<span style="color: #ff0000;">[Unmi 后记]</span><br/>
</strong><br/>
<br/>
这样有关于 JDBC 的日志工具就有三款了：<br/>
<br/>
1. p6spy:&nbsp;&nbsp; <a href="http://www.p6spy.com/">http://www.p6spy.com</a><br/>
2. JDBC Logger <a href="http://jdbclogger.sourceforge.net/">http://jdbclogger.sourceforge.net/</a><br/>
3. jdbcslog <a href="http://code.google.com/p/jdbcdslog/">http://code.google.com/p/jdbcdslog/</a><br/>
<br/>
关于 p6spy 的使用前面有一个系列的文单介绍：<br/>
<br/>
1. <a title="用 p6spy 来观察 Java 程序中执行的所有 SQL 语句（一. 引子）" href="http://unmi.cc/p6spy-view-java-executing-sql-first" target="_blank">用p6spy 来观察Java 程序中执行的所有SQL 语句（一. 引子）</a><br/>
2.&nbsp;<a title="用 p6spy 来观察 Java 程序中执行的所有 SQL 语句（二. Tomcat 下的配置）" href="http://unmi.cc/p6spy-view-java-executing-sql-tomcat" target="_blank">用 p6spy 来观察 Java 程序中执行的所有 SQL 语句（二. Tomcat 下的配置）</a><br/>
3. <a title="用 p6spy 来观察 Java 程序中执行的所有 SQL 语句（三. 定制输出）" href="http://unmi.cc/p6spy-view-custom-java-executing-sql" target="_blank">用 p6spy 来观察 Java 程序中执行的所有 SQL 语句（三. 定制输出）</a><br/>
4. <a title="用 p6spy 来观察 Java 程序中执行的所有 SQL 语句（四. 结合 SQL Profiler）" href="http://unmi.cc/p6spy-view-java-executing-sql-profiler" target="_blank">用 p6spy 来观察 Java 程序中执行的所有 SQL 语句（四. 结合 SQL Profiler）</a><br/>
5. <a title="用 p6spy 来观察 Java 程序中执行的所有 SQL 语句（五. 结合 IronTrack SQL）" href="http://unmi.cc/p6spy-view-executing-sql-irontrack" target="_blank">用 p6spy 来观察 Java 程序中执行的所有 SQL 语句（五. 结合 IronTrack SQL）</a>
