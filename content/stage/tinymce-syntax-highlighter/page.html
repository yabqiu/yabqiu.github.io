---
title: 给 TinyMCE 添加一个语法加亮插件的工具按钮
url: /tinymce-syntax-highlighter/
date: 2010-08-27T05:13:35-05:00
featured: false
draft: true
toc: false
# menu: main
usePageBundles: true
categories:
  - WordPress
  - My Works
tags: 
  - wordpress
  - Highlighter
comment: true
codeMaxLines: 50
# additional
wpPostId: 2204 
wpStatus: publish
views: 1500
lastmod: 2018-07-10T10:47:37-05:00
---

<p>前面已有几篇讲了有关 WordPress 的语法加亮的插件，谁让我的日志中代码特别多呢。在此之前我都是要把编辑器切到 HTML 模式，然后写上 &lt;pre class='brush:java'&gt;CodeHere&lt;/pre&gt;，然后回到 Visual 模式，最后贴上代码，麻烦就在于模式切换。如果能给 TinyMCE 编辑器加个按钮，点击后弹出窗口中选择语言类型，贴入代码，不用切换就能加亮你的程序代码就好，这里就是说这个的，当然你要是用 [ code lang='java']CodeHere[/code] 这样的 BBCode 来张贴代码倒简单些。<!--more--></p>

<p>类似现成的插件也是有的，像</p>

<p>1. <a href="http://wordpress.org/extend/plugins/wp-syntax-button/" target="_blank" rel="noopener">WP-Syntax Button</a><br /><br/>
2. <a href="http://wordpress.org/extend/plugins/visual-code-editor/" target="_blank" rel="noopener">Visual Code Editor</a><br /><br/>
3. <a href="http://wordpress.org/extend/plugins/codecolorer-tinymce-button/" target="_blank" rel="noopener">CodeColorer TinyMCE Button</a><br /><br/>
4. <a href="http://wordpress.org/extend/plugins/wp-syntax-integration/" target="_blank" rel="noopener">WP-Syntax Editor Integration Plugin</a>(本身集成了 Google Syntax Highlighter 组件)</p>

<p>经试验，上面几个都不符合我的需求，我需要的是生成 &lt;pre class='brush:java'&gt; 这样的代码，而不是 [ code lang='java'] 或 &lt;pre name='code'  class='java'&gt; 这样子的，所以需要自己动手来进行一番定制，并且在语言类型选择上也作了进一步裁剪。</p>

<p>本插件是参照 CodeColorer Tiny MCE Button 写成的，本插件的功能只是在 Tiny MCE 上加个工具按钮，具体语法加亮需要安装某一个基于 Google Syntax Highlighter 组件的插件。看看截图：</p>

<pre class="brush:scala">CodeHere</pre>

<p><img class="aligncenter" src="http://unmi.cc/wp-content/uploads/2010/08/syntaxhighlighter_button.jpg" alt="" width="750" height="430" /></p>

<p>&lt;pre&gt; 标签我已经给它加了容易辨识的样式，字体颜色，风格与边框，请参考：<a href="http://unmi.cc/wordpress-use-syntaxhighlighter-evolved" target="_blank" rel="noopener">用 SyntaxHighlighter Evolved 作为自已的代码加亮插件</a>。</p>

<p>基本上已现有的功能够我用了，肯定还有许多地方值得改善的，例如：</p>

<p>1. 弹出窗口选择语言类型太慢了，因为每次弹出窗口时都会请求一个页面，完全可以做成一个层，点击按钮只是显示层<br /><br/>
2. 或许可以不用弹出窗口的方式，直接给 TinyMCE 加一个下拉的选项按钮<br /><br/>
3. 可增加更多的控制选择，例如公共配置页里设置全局的，每次可以设置局部的。像是否显示工具栏呀、标尺、加亮行等等<br /><br/>
4. 支持更多的标签格式，不光是 &lt;pre class='brush:java'&gt;, 还应加上用户可选择的 &lt;pre name=code class='java'&gt;、&lt;pre lang='java'&gt; 或是 [ code lang='java]<br /><br/>
5. 或者再加可直接在弹出窗口中添加、编辑源程序的功能<br /><br/>
6. 能支持的语言类型用户可配置，省得有些实际不支持，或有些根本不会用到。</p>

<p>另外，这个插件与 Visual Code Editor 是有冲突的，因为 Visual Code Editor 错误的主张大家都不爱 &lt;pre class='brush:java'&gt; 这种风格。可以说是为了一小撮人的利益，欺骗着众多不明真相的群众。激活了 Visual Code Editor 后，任何的 &lt;pre&gt; 标签的属性都会被无情的格杀掉。</p>

<p>本插件下载：<a href="/wp-content/downloads/syntaxhighlighter-button-v0.1.zip" target="_blank" rel="noopener">syntaxhighlighter-button-v0.1.zip</a>.</p>
