---
title: Swift 学习笔记(基本语法)
url: /swift-learning-basic-syntax/
date: 2015-11-22T21:33:52-06:00
featured: false
draft: false
type: post
toc: false
# menu: main
usePageBundles: true
categories:
  - iOS
tags: 
  - Swift
comment: true
codeMaxLines: 50
# additional
wpPostId: 7045 
wpStatus: publish
views: 437
lastmod: 2021-09-03T17:41:05-05:00
---

<div>因为是本人学习 Swift 的笔记，是基于所掌握的其他语言来认识 Swift 的，所以并非详尽的 Swift ABC，也就显得凌乱不堪。</div>
<br/>
<div> </div>
<br/>
<div>不会自动转型，强型转型的方式是 String(变量值), 括号不是括住类型</div>
<br/>
<pre class="&quot;brush:swift">let number = 123
let message = “total: ” + a  //这是错的，必须写成 “total: ” + String(number), 直接常量的话 let message = “total:” + String(123)
</pre>
<br/>
<div>let 为常量, var 为变量, 类型的指定方式与  Scala 一样，如果不让它自动推断或无法推断时，这样指定类型<br/><br/>
<div>
<pre class="brush:swift">var width: Double
</pre>
<!--more-->
<div>字符串中内联变量方式是用 \(变量名)，中间还可以进行计算</div>
<pre class="brush:swift">let apple=1, oranges=2
let summary = “I have \(apple) apple and \(apple+oranges) fruits"
</pre>
<div>Swift 用 “[]” 来创建数组或字典，并且最后一个元素后竟然可以有多余的逗号</div>
<pre class="brush:swift">let colors = ["red", "blue", ]
let map = ["red": 1, "blue": 2,]
</pre>
<div>创建空数组或字典</div>
<pre class="brush:swift">let emptyArray = [String]()
let emptyDictionary = [String: Float]()
</pre>
<div>类型可以推断的话，能用”[]” 和 “[:]” 来创建空数组和字典，大概是前面已知类型的情况，如</div>
<pre class="brush:swift ">let colors:[String] = []
var map:[String:Int] = [:] </pre>
<div>或者如数组，字典类似</div>
<pre class="brush:swift">var colours = ["red"]
colours = [] </pre>
<div>在Swift 的 let 和 Scala 的 val 都是动真格的，不光变量不能重新赋值，并且声明的集合内容也是不能变的, 下面是不能编译的</div>
<div> </div>
<div><img class="aligncenter size-full wp-image-7048" src="/wp-content/uploads/2015/11/swift-syntax-0.png" alt="swift-syntax-0" width="348" height="90" /></div>
<div> </div>
</div>
<div>Swift 的控制语句有  if, switch, for-in, for, while, repeat-while, 控制中圆括号可以省略，但大括号不能省，即使 if 后面只有一条语句也不行，因为省略圆括号与大括号会存在有冲突的，所以干脆大括号不让省<br/><br/>
<pre class="lang:default decode:true">let number = 1
if number == 1
  print("number is 1")
} </pre>
<div>上面 if 中的  == 两边要么都要有空格，要么都没有空格，不能偏向任何一边</div>
<div>如 if number == 1  和 if number== 1 或 if number ==1 是错误的，后两种写法都会误判为闭包</div>
<div>如 if number== 1 被识别为错误</div>
</div>
</div>
<br/>
&nbsp;<br/><br/>
&nbsp;<br/><br/>
<div> </div>
<br/>
<div><img class="aligncenter size-full wp-image-7049" src="/wp-content/uploads/2015/11/swift-syntax-1.png" alt="swift-syntax-1" width="378" height="90" /></div>
<br/>
<div> </div>
<br/>
<div>
<div>
<div>if number ==1 被识别为错误</div>
</div>
<div> </div>
<div><img class="aligncenter size-full wp-image-7050" src="http://unmi.cc/wp-content/uploads/2015/11/swift-syntax-2.png" alt="swift-syntax-2" width="371" height="92" /></div>
<div>
<div> </div>
<div>看 1 后面被自动补充的 _=</div>
<div>Swift 的 Optional 类型要用 ”类型?” 来指定类型，并且声明一个 nil 值也必须用 “类型?" 的形式, 像</div>
<pre class="brush:swift">let name:String? = nil
</pre>
<div>下面都不行</div>
<pre class="brush:swift">let name = nil //Type of expression ambiguous without more context, 无法推断类型
let name:String = nil //Nil cannot initialize specified type “String”, 没法初始化
</pre>
<div>看下普通类型与 Optional 类型的不同</div>
</div>
<div> </div>
<div><img class="aligncenter size-full wp-image-7051" src="/wp-content/uploads/2015/11/swift-syntax-3.png" alt="swift-syntax-3" width="490" height="140" /></div>
<div>
<div> </div>
<div>Optional 才有 map 方法</div>
<div>let 可用在 if 语句中，不过后面的值必须是一个 Optional 类型</div>
<pre class="lang:default decode:true">let n1:Int? = 1
if let n2 = n1 { //n1 必须是一个 Optional 类型，赋什不为 nil 时为真
  print("n2 \(n2) not nil")  //打印出 "n2 1 not nil"
} else {
//    print(n2), 在 else 中居然无法访问 n2, n2 的作用域只在 if 中
  print("n2 is nil")
}</pre>
<div>“??” 可为 Optional 提供 nil 时的默认值，如下代码</div>
<pre class="brush:swift">let name:String? = nil
print(name) //nil
print(name ?? "Yanbin") //Yanbin
print("Hi \(name ?? "Yanbin")") //Hi Yanbin<br/><br/>
let age:Int? = 30
print(age ?? 20) //30
</pre>
<div>let 也可用在 switch..case 中，同时完成值的声明与比较，Swift 中的  case 分支默认是  break 的，和 VB 一样的, 相同的 case 可放在一行中</div>
<pre class="lang:default decode:true">let name = "Yanbin"
 
switch name {
case let x where x.hasPrefix("Yan"):
  print(x)             //Yanbin
case "a1", "a2":       //多个匹配可以放在同一行，用逗号隔开
  print("a1 or a2")
default:               //default 是语法上必须的
  print("no match")
} </pre>
<div><code>0..&lt;4</code> 操作产生了一个不包含上届的 Range, 所以它可以用在循环中</div>
<pre class="lang:default decode:true"> print((0..&lt;4).dynamicType) //Range&lt;Int&gt;
 for i in 0..&lt;4 {
     print(i)  //0, 1, 2, 3
 }
</pre>
</div>
</div>
