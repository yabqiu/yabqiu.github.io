---
title: fish 2.2.0 (July 12, 2015) 支持 vi 模式
url: /fish-2-2-0-july-12-2015-support-vi-mode/
date: 2015-07-13T11:07:05-05:00
featured: false
draft: true
type: post
toc: false
# menu: main
usePageBundles: true
categories:
  - Linux/Unix
tags: 
  - mac
  - Fish
comment: true
codeMaxLines: 50
# additional
wpPostId: 6965 
wpStatus: publish
views: 598
lastmod: 2015-07-14T00:56:26-05:00
---

<p>随着 Mac 下终端的使用日益增多，系统默认的 bash 已经满足不了需求了，于是有了更为强劲的 <a href="http://fishshell.com/" target="_blank">fish</a> 和 <a href="http://www.zsh.org/" target="_blank">zsh</a>，以及它们各自的强心剂 <a href="https://github.com/oh-my-fish/oh-my-fish" target="_blank">Oh-My-Fish</a> 和 <a href="http://ohmyz.sh/" target="_blank">Oh-My-Zsh</a>. 我的选择是 Fish 和 Oh-My-Fish。</p><p>到目前为止，最新的 fish 2.2.0 于 2015 年 7 月 12 日发布，Release notes 如下 <a href="http://fishshell.com/release_notes.html" target="_blank">http://fishshell.com/release_notes.html</a>，其中显著改变有：</p><ul><li>Abbreviations: the new `abbr` command allows for interactively-expanded abbreviations, allowing quick access to frequently-used commands (<a href="https://github.com/fish-shell/fish-shell/issues/731">#731</a>).</li><li>Vi mode: run `fish_vi_mode` to switch fish into the key bindings and prompt familiar to users of the Vi editor (<a href="https://github.com/fish-shell/fish-shell/issues/65">#65</a>).</li><li>New inline and interactive pager, which will be familiar to users of zsh (<a href="https://github.com/fish-shell/fish-shell/issues/291">#291</a>).</li><li>Underlying architectural changes: the `fishd` universal variable server has been removed as it was a source of many bugs and security problems. Notably, old fish sessions will not be able to communicate universal variable changes with new fish sessions. For best results, restart all running instances of `fish`.</li><li>The web-based configuration tool has been redesigned, featuring a prompt theme chooser and other improvements.</li><li>New German, Brazilian Portuguese, and Chinese translations.</li></ul><p>我对第二点比较感兴趣，即增加了 vi 模式，在 fish 下运行 <code>fish_vi_mode</code> 命令，或者在 <code>~/.config/fish/config.fish</code> 中加上 <code>fish_vi_mode</code> 便自动进入 vi 模式。<!--more--></p><p><img class="alignnone wp-image-6974" src="http://unmi.cc/wp-content/uploads/2015/07/fish_vi_mode_INV.png" alt="fish_vi_mode_INV" width="250" height="107" /></p><p>我还没能在官方找到任何关于 fish 的 vi 模式的的说明文档，但作为一个 vi 的使用者，该自由发挥了。</p><p>如前方标识 [I] 为插入模式, [N] 为命令模式, [V] 为可视(Visual) 模式。</p><p>从 [I] 切换到 [N] 模式按 Esc 键</p><p>从 [N] 可以按 V 键切换到 [V] 模式</p><p>从 [N] 到 [I] 模式可以按  i/I, s/S, a/A</p><p>在 [N] 命令模式你可以无底线的去尝试所有的 vi 指令了，如</p><p>^ 跳到行首 (替代了默认的   ctrl + a)</p><p>$ 跳到行尾 (替代了默认的 ctrl + e)</p><p>其他移如  w/b 向后/向前移动一个字, x/dw/dd 删除当前字符，字，和行</p><p>yy 复制当前行，p 粘贴</p><p>自己多多尝试吧。</p><p><strong><span style="text-decoration: underline; color: #800000;">附：fish 和 Oh My Fish 的安装(Mac OS X)</span></strong></p><p>1. 安装 fish:</p><p>brew install fish --HEAD</p><p>2. 安装 Oh My Fish:</p><p>curl -L https://github.com/oh-my-fish/oh-my-fish/raw/master/tools/install.fish | fish</p><p><span style="color: #800000;">当前 Oh My Fish 与的构建也是插件方式，似乎与当前的 fish 2.2.0 存在兼容问题，所以我手动安装的是这个分支</span></p><p><span style="color: #800000;">git clone -b commits-ahead-scorphish git://github.com/oh-my-fish/oh-my-fish.git ~/.oh-my-fish</span><br /><span style="color: #800000;">cp ~/.oh-my-fish/templates/config.fish ~/.config/fish/config.fish</span></p><p>3. 设置 fish 为默认  shell:</p><p>echo "/usr/local/bin/fish" | sudo tee -a /etc/shells<br />chsh -s /usr/local/bin/fish</p><p>如果不想看到每次的欢迎信息在 ~/.config/fish/config.fish 中加上</p><p>set --erase fish_greeting    #或 set fish_greeting ""</p>
