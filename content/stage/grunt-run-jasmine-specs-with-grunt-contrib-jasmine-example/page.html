---
title: "Grunt 运行 Jasmine 测试: grunt-contrib-jasmine-实例"
url: /grunt-run-jasmine-specs-with-grunt-contrib-jasmine-example/
date: 2014-04-19T03:46:29-05:00
featured: false
draft: false
type: post
toc: false
# menu: main
usePageBundles: true
thumbnail: "../images/logos/http://unmi.cc/wp-content/uploads/2014/04/jasmine_logo.png"
categories:
  - NodeJS
tags: 
  - Grunt
  - Jasmine
  - npm
  - node.js
comment: true
codeMaxLines: 50
# additional
wpPostId: 6336 
wpStatus: publish
views: 963
lastmod: 2015-01-15T13:44:12-06:00
---

<p>个人感受，TDD 是一种很好的开发方式，而如今一惯不怎么写测试用例的 JavaScript 代码也有了许多优秀的测试框架，如 Jasmine，Qunit，JsTestDriver，JSUnit，Mocha等。Jasmine(茉莉花--该不会是敏感词吧) 是 BDD，行为驱动开发的测试，典型的例子就是 given-when-then 这样的描述，即基于 Spec 的测试。</p><p>Grunt 是 Node.js 生态圈中的构建工具，正火着呢。一说到 Node.js，初接触它的人初印象大概是 <code>require('http').createServer(...).listen(1337, 'localhost')</code>,  这样的例子反而让人无所适从，其实 Node.js 的能耐大着呢。</p><p>关于 Grunt 的简单使用可以参考之前的一篇：<a href="http://unmi.cc/grunt-nodejs-based-build-tool/" target="_blank">Grunt - 基于 node.js 构建工具之初体验</a>，这篇足够有助于我们对 Grunt 的大局的理解。</p><p>Grunt 能与 Jasmine 的结合有赖于 <a href="https://github.com/gruntjs/grunt-contrib-jasmine" target="_blank">grunt-contrib-jasmine</a> 这条红线，再加上 <a href="http://phantomjs.org" target="_blank">PhantomJS</a>, 使可以完全脱离浏览器而在控制台下跟测试用例了。最快速的体验 grunt-contrib-jasmine, 可从 github 上克隆一个例子项目来，当然假设你已安装好 Node.js, Grunt, PhantomJS 这些工具<!--more--></p><blockquote><p>git clone https://github.com/jsoverson/grunt-contrib-jasmine-example.git<br /> cd grunt-contrib-jasmine-example<br /> npm install<br /> grunt test</p></blockquote><p>看到的结果是</p><p><img class="aligncenter wp-image-6337 size-full" src="http://unmi.cc/wp-content/uploads/2014/04/grunt-jasmine-test-console.png" alt="grunt-jasmine-test-console" width="804" height="372" /></p><p>phantom 也是去运行生成的 _SpecRunner.html 文件，不过默认在测试全过的情况下会自动删除该文件。在有测试用例失败时你可以看到该文件，另外也可以加上</p><blockquote><p>keepRunner: true</p></blockquote><p>选项让 phantome 即使在用例全体通过的情况下也保留该文件，这样你不管在任何情况下都可以事后查看它</p><p><a href="http://unmi.cc/wp-content/uploads/2014/04/grunt-jasmine-test-browser.png"><img class="aligncenter wp-image-6338" src="http://unmi.cc/wp-content/uploads/2014/04/grunt-jasmine-test-browser-1024x499.png" alt="grunt-jasmine-test-browser" width="800" height="390" /></a><br /> 我们以后也可全部通过这个页面来跑测试用例了，比如修复一个测试后，只需跑所在的 Spec 即可，用不着重跑全部测试，刷新这个页面会重新跑全部的测试用例。</p><hr /><p>以上是从网上例子中来体验 Grunt 跑 Jasmine 的感觉，自己的项目该如何做呢，照模学样最容易了，然后再加以理解，消化，扩充。</p><p>本想一篇把 Grunt 跑 Jasmine 的例子讲完，但两个图片大大拉开了篇幅，且通常能继续滚动到第二乃至第三屏幕的读者比例较少，甚至某些时候还不如一个链接功效来得大。所以决定另起一篇继续未尽的事业。且听下回 <a href="/grunt-run-jasmine-specs-with-grunt-contrib-jasmine-demo" target="_blank">Grunt 运行 Jasmine 测试用例: grunt-contrib-jasmine-示例</a> 分解......</p><p>参考：1. <a href="https://github.com/gruntjs/grunt-contrib-jasmine" target="_blank">https://github.com/gruntjs/grunt-contrib-jasmine</a><br /> 2. <a href="https://github.com/jsoverson/grunt-contrib-jasmine-example" target="_blank">https://github.com/jsoverson/grunt-contrib-jasmine-example</a></p>
