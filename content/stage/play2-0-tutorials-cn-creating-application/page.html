---
title: Play 2.0 中文资料 - 创建一个新的应用
url: /play2-0-tutorials-cn-creating-application/
date: 2012-10-04T08:46:21-05:00
featured: false
draft: true
toc: false
# menu: main
usePageBundles: true
categories:
  - Scala
  - PlayFramework
tags: 
  - 翻译
  - Scala
  - PlayFramework
comment: true
codeMaxLines: 50
# additional
wpPostId: 4778 
wpStatus: publish
views: 1688
lastmod: 2021-06-01T16:38:02-05:00
---

<span style="font-size: medium;"><strong>用 play 命令创建一个应用</strong></span></p>
<br/>
创建一个新应用最初的方式是用 <code>play new</code> 命令.<br/><br/>
<pre class="brush:bash">$ play new myFirstApp</pre>
<br/>
这会询问你一些信息.<br/><br/>
<ul>
    <li>应用的名称 (仅用于显示, 这个名称后面将在几个消息中使用到).</li>
    <li>用于这个应用的模板. 你可以从 默认的 Scala 应用, 默认的 Java 应用, 和 空应用 三个选项目中选择.</li>
</ul><br/><br/>
<span style="color: #0000ff;">Unmi 注: 新版 play new 命令允许你带上目录名，让你在指定的目录下创建应用，在 2.0-beta 版中，只是在当前目录下创建你的应用。运行 play help 看显示的 new 是否是: new <strong>[directory]</strong>    Create a new Play application in the specified directory. 就知道能否指定应用的目录。</span><br/><br/>
<span style="color: #0000ff;">并且此时的 play new 命令可以用</span><br/><br/>
<pre class="brush:bash">$ play new ~/Desktop/unmi</pre>
<br/>
<span style="color: #0000ff;">这样就会在 ~/Desktop/unmi 目录中创建应用，后面的提示是一样的. 在 ~/Desktop/unmi 目录下有应用所需的 app, conf, public 等目录。</span><br />
<!--more--><br/><br/>
<p style="text-align: center;"><a href="http://www.playframework.org/documentation/2.0.4/resources/manual/gettingStarted/images/playNew.png"><img class="aligncenter" src="http://www.playframework.org/documentation/2.0.4/resources/manual/gettingStarted/images/playNew.png" alt="" width="750" /></a></p>
<br/>
<blockquote>
注: 你此时选择了一个模板之后，并不意味着以后不能更改程序的语言. 例如, 你可以选择应用基于默认的 Java 应用模板创建, 以后只要你喜欢，随时都可以加入 Scala 代码.
</blockquote>
<br/>
一旦应用创建好了, 你可以再次使用 <code>play</code> 命令进入到  <a href="http://www.playframework.org/documentation/2.0.4/PlayConsole">Play 2.0 控制台 </a>.<br/><br/>
<pre class="brush:bash">$ cd myFirstApp
$ play</pre>
<br/>
<span style="font-size: medium;"><strong>在尚未安装 Play 的情况下创建应用</strong></span><br/><br/>
你还可以在没安装 Play 的情况下创建一个 Play 应用, 使用 sbt.<br/><br/>
<blockquote>
首先得安装 <a href="https://github.com/harrah/xsbt/wiki/Getting-Started-Setup">sbt 0.11.2 </a> 这是必需的.
</blockquote>
<br/>
<span style="color: #0000ff;">Unmi 注: sbt 是 Simple Build Tool 的简称，是 Scala 的正统的项目构建工具，它就像 Java 的 Maven 和 Ant。它的 .sbt 构建文件定义就是基于 Scala 的 DSL 实现。sbt 更灵活之处是配置正确的 resolver, 还能使用 Maven 的依赖仓库。<br />
</span><br/><br/>
先要为你的应用创建一个目录并给 sbt 构建脚本添加两个附件(additions).<br/><br/>
在项目的 project<code>/plugins.sbt 文件中</code>添加以下内容:<br/><br/>
<pre class="brush:scala">// The Typesafe repository
resolvers += "Typesafe repository" at "http://repo.typesafe.com/typesafe/releases/"<br/><br/>
// Use the Play sbt plugin for Play projects
addSbtPlugin("play" % "sbt-plugin" % "2.0")</pre>
<br/>
确保用你想要的确切的版本号替换这里的 <code>2.0</code>. 假如你想要使用一个快照版本, 应该指定额外的解析器(resolver):<br/><br/>
<pre class="brush:scala">// Typesafe snapshots
resolvers += "Typesafe Snapshots" at "http://repo.typesafe.com/typesafe/snapshots/"</pre>
<br/>
在项目的<code> project/Build.scala 文件中</code>:<br/><br/>
<pre class="brush:scala">import sbt._
import Keys._
import PlayProject._<br/><br/>
object ApplicationBuild extends Build {
    val appName = "My first application"
    val appVersion = "1.0"<br/><br/>
    val appDependencies = Nil
    val main = PlayProject(
        appName, appVersion, appDependencies, mainLang = SCALA
    )
}</pre>
<br/>
接着你可以在控制台中，项目目录下运行 sbt 命令:<br/><br/>
<pre class="brush:bash">$ cd myFirstApp
$ sbt</pre>
<br/>
sbt 将会加载你的项目并抓取依赖.<br/><br/>
<span style="color: #0000ff;">从此以下都是 Unmi 注：plugins.sbt 和 Build.scala 两文件的位置，比如项目目录是 ~/myFirstApp, 那么他们应该放在 ~/myFirstApp/project 目录下。</span><br/><br/>
<span style="color: #0000ff;">上面的 sbt 命令一运行后，会像 Maven 那样去找到相应的依赖包去下载，控制台下显示类似的信息：</span><br/><br/>
<pre class="lang:default decode:true">$ cd ~/myFirstApp
$ sbt
[info] Loading project definition from /Users/Unmi/myFirstApp/project
[info] Updating {file:/Users/Unmi/myFirstApp/project/}default-cf7b4e...
[info] Resolving play#sbt-plugin;2.0 ...
[info] Resolving play#play_2.9.1;2.0 ...
[info] Resolving play#templates_2.9.1;2.0 ...
[info] Resolving com.github.scala-incubator.io#scala-io-file_2.9.1;0.2.0 ...
[info] Resolving com.github.scala-incubator.io#scala-io-core_2.9.1;0.2.0 ...
[info] Resolving org.scala-lang#scala-library;2.9.1 ...
[info] Resolving com.github.jsuereth.scala-arm#scala-arm_2.9.1;0.3 ...
[info] Resolving play#anorm_2.9.1;2.0 ...
[info] Resolving io.netty#netty;3.3.0.Final ...
................................................................
[info] downloading http://repo.typesafe.com/typesafe/ivy-releases/play/sbt-plugin/scala_2.9.1/sbt_0.11.2/2.0/jars/sbt-plugin.jar ...
[info]     [SUCCESSFUL ] play#sbt-plugin;2.0!sbt-plugin.jar (10078ms)
[info] downloading http://repo.typesafe.com/typesafe/releases/play/play_2.9.1/2.0/play_2.9.1-2.0.jar ...
[info]     [SUCCESSFUL ] play#play_2.9.1;2.0!play_2.9.1.jar (51120ms)
[info] downloading http://repo.typesafe.com/typesafe/releases/play/templates_2.9.1/2.0/templates_2.9.1-2.0.jar ...
[info]     [SUCCESSFUL ] play#templates_2.9.1;2.0!templates_2.9.1.jar (5540ms)
[info] downloading http://repo.typesafe.com/typesafe/releases/play/console_2.9.1/2.0/console_2.9.1-2.0.jar ...
[info]     [SUCCESSFUL ] play#console_2.9.1;2.0!console_2.9.1.jar (1694ms)
[info] downloading http://repo.typesafe.com/typesafe/releases/com/typesafe/config/config/0.2.1/config-0.2.1.jar ...
[info]     [SUCCESSFUL ] com.typesafe.config#config;0.2.1!config.jar (2681ms)
[info] downloading http://repo.typesafe.com/typesafe/releases/rhino/js/1.7R2/js-1.7R2.jar ...
[info]     [SUCCESSFUL ] rhino#js;1.7R2!js.jar (10764ms)
.........................................................</pre>
<br/>
<span style="color: #0000ff;">这一个 sbt 下载了大量的依赖包，下载的文件有 63M 左右，文件存储在目录 ~/.ivy2/cache 目录中, 列举三个下载的 jar 文件完整的路径：</span><br/><br/>
<pre class="brush:text">~/.ivy2/cache/scala_2.9.1/sbt_0.11.2/play/sbt-plugin/jars/sbt-plugin-2.0.jar
~/.ivy2/cache/play/play_2.9.1/jars/play_2.9.1-2.0.jar
~/.ivy2/cache/dom4j/dom4j/jars/dom4j-1.6.1.jar</pre>
<br/>
<span style="color: #0000ff;">并且光一个 sbt 把 scala-2.9.1 的编译器的库，play 框架，还有第三方的许多依赖都下载过来了，所以通过这种方式，Scala 和 Play 框架都不需要事先安装好。</span><br/><br/>
<span style="color: #0000ff;">addSbtPlugin("play" % "sbt-plugin" % "2.0") 这样的写法连接起来的依赖与 Maven 中是一样的，各部分为 groupId % artifactID % revision。有时候会用 %% 代替这里的 % 来连接，%% 代表会附加上正在使用的 Scala 的版本号，这个版本号从 project/build.sbt 中的 scalaVersion 配置项读取。这里没有这个 build.sbt 文件, 当前的 sbt 默认了是 2.9.1。</span><br/><br/>
<span style="color: #0000ff;">要使用 Scala-2.9.2 需要在 project/build.sbt 文件中加上内容：</span><br/><br/>
<pre class="brush:scala">scalaVersion := "2.9.2"</pre>
<br/>
<span style="color: #0000ff;">这样上面的 2.9.1 就会换成 2.9.2。</span><br/><br/>
<span style="color: #0000ff;">尝试过只通过修改 Build.scala 内容, 像更改 appDependencies 和 main 两个变量的定义，如下，来应用 scala 2.9.2, 最终未能成功</span><br/><br/>
<pre class="lang:default decode:true ">val appDependencies = Seq(
    "org.scala-lang" % "scala-compiler" % "2.9.2"
)
val main = PlayProject(
   appName, appVersion, appDependencies, mainLang = SCALA
).settings(
   scalaVersion := "2.9.2"
)</pre>
<br/>
<span style="color: #0000ff;">使用了上面的变量 appDependencies 和 main 后，执行 sbt 时取得的仍然是 Scala-2.9.1 的版本，不知道是在哪里出了问题。</span><br/><br/>
<span style="color: #0000ff;">而且即使在 build.sbt 中用 scalaVersion := "2.9.2" 表明了用 Scala-2.9.2, 只是保证 scala-compiler 和 scala-library 会取 2.9.2 的版本，其他的依赖可能还是取 xxx_2.9.1 的版本。</span>
