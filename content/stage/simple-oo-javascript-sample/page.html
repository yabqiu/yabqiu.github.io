---
title: "以一个最简单的例子把OO的JavaScript说明白[转]"
url: /simple-oo-javascript-sample/
date: 2006-06-21T00:17:00-05:00
featured: false
draft: true
toc: false
# menu: main
usePageBundles: true
categories:
  - Web/JS
tags: 
  - javascript
  - oo
comment: true
codeMaxLines: 50
# additional
wpPostId: 567 
wpStatus: publish
views: 368
lastmod: 2021-09-03T10:41:14-05:00
---

以一个最简单的例子把OO的JavaScript说明白 OO的JavaScript并不高深，麻烦就麻烦在google出来的国人介绍文章经常罗罗嗦嗦，而且之间的说法还各有不同，摆在一起就让人看了头大。<br />
这里重拾简单主义，以一个最简单的例子把OO Javascript说明白。</p>
<br/>
<strong>1.一个颇为精简的例子</strong><br/><br/>
只需理解三个关键字:<br />
第一个是function ，JS世界里Class的定义用'function'，function里面的内容就是构造函数的内容。<!--more--><br />
第二个是this指针，代表调用这个函数的对象。<br />
第三个是prototype，用它来定义成员函数， 比较规范和保险。<br/><br/>
<pre class="brush:jscript">//定义Circle类，拥有成员变量r，常量PI和计算面积的成员函数area()
function Circle(radius)
{
    this.r = radius;
}<br/><br/>
Circle.PI = 3.14159;
Circle.prototype.area = function(){
    return Circle.PI * this.r * this.r;
}<br/><br/>
//使用Circle类
var c = new Circle(1.0);
alert(c.area());</pre>
<br/>
另外成员函数定义还可以写成这样:<br/><br/>
<pre class="brush:jscript">function compute_area(){
    return Circle.PI * this.r * this.r;
}
Circle.prototype.area=compute_area;</pre>
<br/>
<strong>2.继承</strong><br/><br/>
注意两点<br />
1)定义继承关系 ChildCircle.prototype=new Circle(0); 其中0是占位用的<br />
2)调用父类的构造函数<br/><br/>
<pre class="lang:default decode:true ">this.base=Circle;
this.base(radius);<br/><br/>
//定义ChildCircle子类
function ChildCircle(radius){
    this.base=Circle;
    this.base(radius);
}<br/><br/>
ChildCircle.prototype=new Circle(0);
function Circle_max(a,b){
    if (a.r &gt; b.r) return a;
    else return b;
}<br/><br/>
ChildCircle.max = Circle_max;<br/><br/>
//使用ChildCircle子类
var c = new ChildCircle(1);
var d = new ChildCircle(2);
var bigger = d.max(c,d);
alert(bigger.area());</pre>
<br/>
<strong>3.var式定义</strong><br/><br/>
JS还支持一种var Circle={raidus:1.0,PI:3.1415}的形式，语法就如CSS的定义。<br />
因此如果Circle只有一个实例，下面的定义方式更简洁：<br/><br/>
<pre class="brush:jscript">var newCircle=
{
    r:1.0,
    PI:3.1415,
    area: function(){
        return this.PI * this.r * this.r;
    }
};<br/><br/>
alert(newCircle.area());</pre>
<br/>
可以看看Rails带的OO Javascript库--<a href="http://prototype.conio.net" target="_blank" rel="noopener">Prototype</a><br />
其实，Javascript现在的语法真的不适合那么别扭的写成OO模式....
