---
title: 一个切实可用的CheckStyle的build.xml文件
url: /checkstyle-build-xml/
date: 2006-01-04T09:13:00-06:00
featured: false
draft: true
toc: false
# menu: main
usePageBundles: true
thumbnail: "../images/logos/https://yanbin.blog/wp-content/uploads/2006/01/checkstyle-logo.png"
categories:
  - Java/JEE
tags: 
  - build
  - Java
  - CheckStyle
comment: true
codeMaxLines: 50
# additional
wpPostId: 598 
wpStatus: publish
views: 868
lastmod: 2021-04-07T09:53:16-05:00
---

网上找了好些个关于CheckStyle的文章都是抄抄抄一大通，却没有一个build.xml着实可运行,<br />
在这里我也是参考着一编，改改成能成功运行并能生成正确报告，发送 Email 的build.xml文件</p>
<br/>
<pre class="lang:default decode:true ">&lt;?xml version="1.0" encoding="gb2312"?&gt;<br/><br/>
&lt;!-- ANT make file checkstype --&gt;<br/><br/>
&lt;!-- See &lt;a href="http://jakarta.apache.org/ant" data-mce-href="http://jakarta.apache.org/ant"&gt;http://jakarta.apache.org/ant&lt;/a&gt; for info about ANT --&gt;
&lt;!-- 网上下来的CheckStyle解压在d:/javalib/CheckStyle/checkstyle-4.1中 --&gt;
&lt;project name="checkstyle" default="checkstyle" basedir="d:/javalib/CheckStyle/checkstyle-4.1"&gt;<br/><br/>
    &lt;!-- CheckStyle配置,这里你替换成你实际的环境 --&gt;
    &lt;property name="project.docs.dir" value="${basedir}/contrib"/&gt;<br/><br/>
    &lt;!-- 源代码的目录是e:/eclipseworkspace/talupdate/src --&gt;
    &lt;property name="project.src.dir" value="e:/eclipseworkspace/talupdate/src"/&gt;<br/><br/>
    &lt;!-- 建立了build目录在其中生成报告 --&gt;
    &lt;property name="project.checkstyleReport.dir" value="${basedir}/build"/&gt;
    &lt;property name="checkstyle.jar" value="${basedir}/checkstyle-all-4.1.jar"/&gt;<br/><br/>
    &lt;!-- 使用SUN的代码规范，可替换成公司自己的规范 --&gt;
    &lt;property name="checkstyle.config" value="${basedir}/sun_checks.xml"/&gt;
    &lt;property name="checkstyle.report.style" value="${project.docs.dir}/checkstyle-noframes.xsl"/&gt;
    &lt;property name="checkstyle.result" value="${project.checkstyleReport.dir}/checkstyle_result.xml"/&gt;
    &lt;property name="checkstyle.report" value="${project.checkstyleReport.dir}/checkstyle_report.html"/&gt;<br/><br/>
    &lt;!-- 定义发送邮件列表 --&gt;
    &lt;property name="mail.list" value="(User1)user1@xxx.com,(User2)user2@xxx.com"/&gt;<br/><br/>
    &lt;target name="init"&gt;
        &lt;tstamp/&gt;
    &lt;/target&gt;<br/><br/>
    &lt;!--CheckStyle脚步--&gt;
    &lt;taskdef resource="checkstyletask.properties" classpath="${checkstyle.jar}"/&gt;<br/><br/>
    &lt;target name="checkstyle" depends="init" description="对java源代码进行检查并产生检查报告. "&gt;
        &lt;checkstyle config="${checkstyle.config}" failOnViolation="false" failureProperty="checkstyle.failure"&gt;
            &lt;formatter type="xml" tofile="${checkstyle.result}"/&gt;
            &lt;fileset dir="${project.src.dir}" includes="**/*.java"/&gt;
        &lt;/checkstyle&gt;<br/><br/>
        &lt;!-- 生成报告,其格式取决于${checkstyle.report.style} --&gt;
        &lt;style in="${checkstyle.result}" out="${checkstyle.report}" style="${checkstyle.report.style}"/&gt;
    &lt;/target&gt;<br/><br/>
    &lt;!-- 当有不规范的情况发生时将检查结果发送到 --&gt;
    &lt;target name="checkstyle-nightly" depends="checkstyle" if="checkstyle.failure"
        description="Sends email if checkstyle detected code conventions violations."&gt;<br/><br/>
        &lt;!-- 如果邮件服务器需要验证，则加上 user 和 password 属性 --&gt;
        &lt;mail from="(Admin)admin@xxx.com" tolist="${mail.list}" mailhost="mail.xxx.com" 
            subject=" checkstyle result from project reports" files="${checkstyle.report}"/&gt;
    &lt;/target&gt;
&lt;/project&gt;</pre>
<br/>
&lt;继续补充内容&gt;
