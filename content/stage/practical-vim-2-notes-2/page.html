---
title: 《Practical Vim》阅读笔记 (2)
url: /practical-vim-2-notes-2/
date: 2017-02-03T01:11:31-06:00
featured: false
draft: true
toc: false
# menu: main
usePageBundles: true
thumbnail: "../images/logos/http://unmi.cc/wp-content/uploads/2017/01/vim-logo-en.png"
categories:
  - Vim
tags: 
  - vim
comment: true
codeMaxLines: 50
# additional
wpPostId: 7720 
wpStatus: publish
views: 383
lastmod: 2017-04-07T08:50:51-05:00
---

<p>1. Vim 的模式: 通常我们说有三种模式，正常模式(Normal Mode), 插入模式(Inert Mode) 和可视模式(Visual Mode). 其实除此之外还有<br /><br/>
     4) Operator-Pending Mode: 就是正常模式下按下操作(Operator) 指令(如 c, d 等) 后，等待输入移动(Motion) 指示时的模式。这时 Escape 或 Motion 指令后退回到正常模式<br /><br/>
     5) Insert Normal Mode: 在插入模式时，按下 <code>&lt;Ctrl-o&gt;</code> 组合键后进入该模式, 此时可接受一个 Action (Operator + Motion = Action), 比如 <code>3dd</code>, 然后自动返回到插入模式。<code>&lt;Esc&gt;</code> 也能从 Insert Normal Mode 返回到插入模式。这方便了插入模式只想执行一次指令操作时来回切换, Insert Normal Mode 在 Vim 的状态栏中显示为下图那样 - NORMAL --(insert) --<br /><br/>
 <img class="size-full wp-image-7724 aligncenter" src="//unmi.cc/wp-content/uploads/2017/01/vim-insert-normal.png" alt="" width="181" height="62" /></p>

<p>    6) 替换模式(Replace Mode)<code>-- REPLACE --</code>，<code>R</code> 会进到替换模式，随后输入往后覆盖，可尝试 <code>&lt;Insert&gt;</code> 键;  <code>r{char}</code> 和 <code>gr{char}</code> 临时进入单字符的替换模式，替换完当前字符立即退到正常模式，也就是光标不往下走。<br /><br/>
     7) 可视替换模式(Visual Replace Mode) <code>-- VREPLACE --</code>, 用 <code>gR</code> 进入该模式，在处理 <code>tab</code> 字符时会更友好，还有别的好处吧，所以该书建议尽量用可视替换模式。<br /><br/>
     8) 可视模式(Visual Mode)，这就复杂了。它有三个子模式:<br /><br/>
       <code>character-wise Visual mode</code> --  <code>-- VISUAL</code> ;<br /><br/>
       <code>line-wise Visual mode</code> --  <code>-- VISUAL LINE --</code><br /><br/>
       <code>block-wise Visual mode</code> -- <code>-- VISUAL BLOCK --</code><br /><br/>
 <br /><br/>
     9) 选择模式(Select Mode)，可视模式下选择了内容后用 <code>&lt;C-g&gt;</code> 可在两种模式下切换，状态栏 <code>-- VISUAL --</code> 和 <code>-- SLECT --</code> 的不同，还有选择模式下直接输入就会替换当前的内容，与其他编辑器的行为一样，而可视模式需要按 <code>c</code> 来替换当前内容。<!--more--></p>

<p>2. 插入模式下切换到正常模式时除 <code>Esc</code>, 还可以按 <code>&lt;C-[&gt;</code> 组合键，效果是一样的, 看个人的习惯。</p>

<p>3. <code>zz</code> 把当前行定位到屏幕中央，便于阅读代码，在插入模式下就可以用 <code>&lt;C-o&gt; zz</code>.</p>

<p>4. 在插入模式式不一定执行什么指令都要切换到正常模式去，比如 <code>&lt;C-h&gt;</code> 往回删除一个字符(backspace); <code>&lt;C-w&gt;</code> 往前删除一个单词(dbx); <code>&lt;C-u&gt;</code> 往回删除到行首(<code>d0</code> 或 <code>d^</code>)</p>

<p>5. 在插入模式下粘贴寄存器内容，例如<code>yy</code> yank 了当前行内容到寄存器 <code>0</code> 中，然后我们移动光标到某个位置进到插入模式，可以按 <code>&lt;C-r&gt;0</code> 在当前位置插入刚刚 yank 的内容，不需要在正常模式下用 <code>p</code> 来粘贴 yank 的内容。<code>&lt;C-r&gt;0</code> 就像系统命令的粘贴 <code>Cmd-V</code> 一样，内容会产生混乱的缩进，这时用 <code>&lt;C-r&gt;&lt;C-p&gt;{register}</code> 就像执行了 <code>:set paste</code> 一样会原样粘贴。因为 <code>&lt;C-r&gt;</code> 后接寄存器的名字，而系统剪贴板的名字是 <code>*</code>, 所以 <code>&lt;C-r&gt;*</code> 就和 <code>Cmd-V</code> 一样了。<code>:reg</code> 可查看所有寄存器的内容及名字。</p>

<p>6. 表达式寄存器--会作运算的寄存器。在插入模式下 <code>&lt;C-r&gt;=</code> 会在下方打开一个 <code>=</code> 提示符，输入表达式，如 <code>6*35</code>, 然后按回车就会把计算结果 <code>210</code> 插入到当前位置。这时候用 <code>:reg</code> 可以看到 <code>=</code> 寄存器的内容。</p>

<p>7. 应用 <code>&lt;C-v&gt;{123}</code> 或 <code>&lt;C-v&gt;u{1234}</code> 来插入字符一般来说用处也不太大, 倒是 <code>ga</code> 命令查看当前光标所在字符的编码有用，例如 a 字符上 <code>ga</code> 看到的是 <code>&lt;a&gt; 97, Hex 61, Octal 141</code>, 可不用插件进到 hexmode, 任意字符都行，如 <code>我</code> 字，看到的是 <code>&lt;我&gt; 25105, Hex 6211, Octal 61021</code>, 也就是可以用 <code>&lt;C-v&gt;u6211</code> 输入 <code>我</code> 字。</p>

<p>8. 单独记下 <code>&lt;C-k&gt;{char}{char}</code> 的用途，可以输入一些比较有意思的字符(<code>digraph</code>)。插入模式式按下 <code>&lt;C-k&gt;</code> 后光标下出现 <code>?</code> 等待输入两个字符，如 <code>&lt;C-k&gt;ad</code> 变成 <code>だ</code>. 想要输入中文的书名号 « 和 »， 分别输入 <code>&lt;C-k&gt;&lt;&lt;</code> 和 <code>&lt;C-k&gt;&gt;&gt;</code>. 而输入 <code>&lt;C-k&gt;12</code>, <code>&lt;C-k&gt;34</code> 变成 ½ 和 <code>¾</code>. <code>:digraphs</code> 列出了所有的可用 <code>&lt;C-k&gt;{char}{cahr}</code> 输入的字符，或可用 <code>:h digraph-table</code> 查看。</p>

<p>9. 可视模式与正常模式有一个操作不同是顺序，如在正常模式下想修改当前的单词 <code>March</code> 为 <code>April</code>, 需要 <code>cawApril</code>, 而可视模式是 <code>viw</code> 选择当前单记号，然后 <code>cApril</code> 修改替换掉选择区域的内容。这里 <code>v</code> 后面的 <code>iw</code> 是 motion 命令，即 <code>inner world</code>  的意思，可用 <code>:help iw</code> 来获得帮助，类似的 <code>is</code>, <code>ip</code> 等。</p>

<p>10. 进入 Vim 的三个 Visual 子模式的快捷键分别是:<br /><br/>
       1) <code>v</code> 进入 <code>character-wise Visual mode</code><br /><br/>
       2) <code>V</code> 进入 <code>line-wise Visual mode</code><br /><br/>
       3) <code>&lt;C-v</code> 进入 <code>block-wise Visual mode</code><br /><br/>
       -- <code>gv</code> 重新上一次的选择，如果上次的内容已删除了就比较奇怪了，它只记住上次选择的位置区域</p>

<p>11. <code>o</code> 在选择区域的前后跳转，对于以三种选择模式都适用。</p>

<p>12. <code>.</code> 重复之前选择区域的操作，相当于是 <code>gv</code> 后再 <code>.</code> 操作。<code>gv</code> 是重复上一次的选择，对选择区域的命令操作后会变回到正常模式，如 <code>V</code> 后 <code>gU</code>, 后该行全变为大写， <code>j</code> 移到下行后 <code>.</code> 就能重复的把现在所在行变为大写。</p>

<p>13. Vim 的 VISUAL BLOCK 模式进行列操作时会让人有所费解，因为在选定了列进入插入模式后输入变化只暂时体现在最上面选择行上，只有当退出到正常模式时输入才会作用所有行上。试下这样的操作 <code>&lt;C-v&gt;3jllc{chars}&lt;Esc&gt;</code>, 在多行的最前面同时插入字符 a 可以这样做 <code>0&lt;C-v&gt;jjIa&lt;Esc&gt;</code>, 也是只有按下的 &lt;Esc&gt; 键后才能看到所有选择行才发生变化。但是列删除是在多行上立即见效的。</p>

<p>14. 在块可视模式下，按 <code>A</code> 或 <code>I</code> 可以分别在选择区的左右边缘插入，而小写的 <code>a</code> 或 <code>i</code> 就失去在正常模式下的功效了。</p>

<p>链接：</p>

<ol>

	<li><a href="http://xstarcd.github.io/wiki/vim/vimsuper.html">vim不易发现的强大功能</a></li>

</ol>
