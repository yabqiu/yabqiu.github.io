---
title: Play 2.0 中文资料 - 使用 Play 2.0 控制台
url: /httpunmi-ccplay2-0-tutorials-cn-creating-application-using-console/
date: 2012-10-05T03:51:58-05:00
featured: false
draft: true
type: post
toc: false
# menu: main
usePageBundles: true
categories:
  - PlayFramework
tags: 
  - 翻译
  - Scala
  - PlayFramework
comment: true
codeMaxLines: 50
# additional
wpPostId: 4813 
wpStatus: publish
views: 1117
lastmod: 2013-01-26T10:08:23-06:00
---

<span style="font-size: medium;"><strong>启动控制台</strong></span><br/>
<br/>
Play 2.0 控制台是基于 sbt 的为开发而准备的控制吧, 它允许你管理整个 Play 应用的开发周期.<br/>
<br/>
要启动控制台, 进入到现有的 Play 应用的目录，然后运行&nbsp;<code>play</code>&nbsp;脚本:<br/>
<br/>
<span style="color: #0000ff;">Unmi 注: 虽然 sbt 是为 Scala 准备的构建工具，但是即使你创建的应用选的是 Java 语言, 我们仍然是要依赖于 sbt. 在 Play 1.x 的时候不存在 Play 控制台，要么就是直接把应用运行起来了。在 Play 1.x 的项目目录下运行 play 命令只会显示简单的帮助信息。</span><br/>
<br/>
<span style="color: #0000ff;">play 命令进入到当前应用的控制台下，提示符是 <strong>[应用的名称] $</strong></span><br/>
<pre class="brush:bash">$ cd /path/to/any/application $ play</pre>

<p style="text-align: center;"><a href="http://www.playframework.org/documentation/2.0.4/resources/manual/gettingStarted/images/console.png"><img class="aligncenter" alt="" src="http://www.playframework.org/documentation/2.0.4/resources/manual/gettingStarted/images/console.png" width="750" /></a></p>

<strong><!--more--><span style="font-size: medium;">获取帮助</span></strong><br/>
<br/>
使用&nbsp;<code>help play</code>&nbsp;命令可得到关于可用命令的基本的帮助内容:<br/>
<pre class="brush:bash">[My first application] $ help play</pre>

<span style="font-size: medium;"><strong>开发模式下运行服务</strong></span><br/>
<br/>
要在开发模式下运行当前应用, 用&nbsp;<code>run</code>&nbsp;命令:<br/>
<pre class="brush:bash">[My first application] $ run</pre>

<p style="text-align: center;"><a href="http://www.playframework.org/documentation/2.0.4/resources/manual/gettingStarted/images/consoleRun.png"><img class="aligncenter" alt="" src="http://www.playframework.org/documentation/2.0.4/resources/manual/gettingStarted/images/consoleRun.png" width="750" /></a></p>

在此种模式下, Server 将会运行在开启了自动重加载的特征下, 意味着每次请求时, Play 都会检查项目并编译必须的资源. 如果需要的话, 应用还会自动地重启.<br/>
<br/>
假如有出现任何的编译错误, 你能在浏览器中直接看到编译的错误提示:<br/>
<p style="text-align: center;"><a href="http://www.playframework.org/documentation/2.0.4/resources/manual/gettingStarted/images/errorPage.png"><img class="aligncenter" alt="" src="http://www.playframework.org/documentation/2.0.4/resources/manual/gettingStarted/images/errorPage.png" width="750" /></a></p>

想要停止 Server, 按下&nbsp;<code>Crtl+D</code>&nbsp;组合键, 你又会回到 Play 控制台提示符下.<br/>
<br/>
<span style="font-size: medium;"><strong>编译</strong></span><br/>
<br/>
在 Play 2.0 中, 你也可以在未运行服务的情况下编译你的应用. 只要运行&nbsp;<code>compile&nbsp;</code>命令: <span style="color: #0000ff;">Unmi 注: 这就是 sbt 给我们带来的特性。</span><br/>
<pre class="brush:bash">[My first application] $ compile</pre>

<p style="text-align: center;"><a href="http://www.playframework.org/documentation/2.0.4/resources/manual/gettingStarted/images/consoleCompile.png"><img class="aligncenter" alt="" src="http://www.playframework.org/documentation/2.0.4/resources/manual/gettingStarted/images/consoleCompile.png" width="750" /></a></p>

<span style="font-size: medium;"><strong>启动交互控制台</strong></span><br/>
<br/>
敲入&nbsp;<code>console</code>&nbsp;可进入到 Scala 交互控制台, 这里允许你交互性的测试你的代码: <span style="color: #0000ff;">Unmi 注: 看来，即使是完全用 Java 语言来写 Play 2.0 的程序也是有必要掌握 Scala 语言的。</span><br/>
<pre class="brush:bash">[My first application] $ console</pre>

<p style="text-align: center;"><a href="http://www.playframework.org/documentation/2.0.4/resources/manual/gettingStarted/images/consoleEval.png"><img class="aligncenter" alt="" src="http://www.playframework.org/documentation/2.0.4/resources/manual/gettingStarted/images/consoleEval.png" width="750" /></a></p>

<span style="font-size: medium;"><strong>调试</strong></span><br/>
<br/>
在启动控制台的时候你可以要求 Play 启动&nbsp;<strong>JPDA</strong>&nbsp;调试端口. 你就可以用 Java 调试器连接上这个端口. 使用&nbsp;<code>play debug</code>&nbsp;命令来做到这个:<br/>
<pre class="brush:bash">$ play debug</pre>

当 JPDA 端口可用时, JVM 会在启动期间打印下行日志:<br/>
<pre class="brush:bash">Listening for transport dt_socket at address: 9999</pre>

<blockquote><strong>注:</strong>&nbsp;使用&nbsp;<code>play debug</code>&nbsp;命令后, JPDA socket 会在端口&nbsp;<code>9999 上打开</code>. 你也可以设置&nbsp;<code>JPDA_PORT</code>&nbsp;环境变量改成你想要的端口, 如使用&nbsp;<code>set JPDA_PORT=1234</code>.</blockquote>

<span style="font-size: medium;"><strong>使用 sbt 特性</strong></span><br/>
<br/>
Play 控制台实质就是一个 sbt 控制台, 所以你可以使用 sbt 的特性, 像触发执行(<strong>triggered execution</strong>).<br/>
<br/>
例如, 使用&nbsp;<code>~ compile</code><br/>
<pre class="brush:bash">[My first application] $ ~ compile</pre>

这样每次有文件改动都会触发编译动作.<br/>
<br/>
如果你用&nbsp;<code>~ run</code><br/>
<pre><code>[My first application] $ ~ run</code></pre>

开发服务器运行的时候就会开启触发编译特性.<br/>
<br/>
你也可以为&nbsp;<code>~ test 做一样的事情</code>, 当有源文件改动时会进行持续性测试你的项目:<br/>
<pre class="brush:bash">[My first application] $ ~ test</pre>

<span style="font-size: medium;"><strong>直接使用 play 命令</strong></span><br/>
<br/>
你也可以不进入 Play 控制台而直接运行命令. 例如, 键入&nbsp;<code>play run</code>: <span style="color: #0000ff;">Unmi 注: Play 1.x 就是只能这么做。</span><br/>
<pre class="brush:bash">$ play run<br/>
[info] Loading project definition from myFirstApp/project<br/>
[info] Set current project to My first application<br/>
<br/>
--- (Running the application from SBT, auto-reloading is enabled) ---<br/>
<br/>
[info] play - Listening for HTTP on port 9000...<br/>
<br/>
(Server started, use Ctrl+D to stop and go back to the console...)</pre>

应用直接启动. 当用&nbsp;<code>Ctrl+D 退出服务的时候</code>, 你会回到系统的提示符下.<br/>
<br/>
<span style="font-size: medium;"><strong>强制清理</strong></span><br/>
<br/>
要是哪儿出问题了, 并且你认为是 sbt 缓存被毁坏了, 可在系统命令行下用&nbsp;<code>clean-all 命令来清除掉所有自动产生的目录</code>.<br/>
<pre class="brush:bash">$ play clean-all</pre>

<span style="color: #0000ff;">Unmi 注: 执行 play clean-all 命令后会删除掉项目下的 logs 和 target 两目录。</span>
