---
title: 查询Oracle正在执行的SQL语句
url: /oracle-what-sql-executing/
date: 2009-05-04T22:07:00-05:00
featured: false
draft: false
type: post
toc: false
# menu: main
usePageBundles: true
categories:
  - Database
tags: 
  - database
  - Oracle
  - Sql
comment: true
codeMaxLines: 50
# additional
wpPostId: 276 
wpStatus: publish
views: 649
lastmod: 2010-08-10T09:49:56-05:00
---

支持左连接的 Oracle 9i 以上版本<br/>
<pre class="brush:sql">select OSUSER, PROGRAM, USERNAME, SCHEMANAME, B.Cpu_Time, STATUS, B.SQL_TEXT<br/>
  from V$SESSION A<br/>
  LEFT JOIN V$SQL B ON A.SQL_ADDRESS = B.ADDRESS<br/>
                   AND A.SQL_HASH_VALUE = B.HASH_VALUE<br/>
 order by b.cpu_time desc</pre>

 Oracle 8i 及以前的版本中<br/>
<pre class="brush:sql">select OSUSER, PROGRAM, USERNAME, SCHEMANAME, STATUS, B.SQL_TEXT<br/>
  from V$SESSION A, V$SQL B<br/>
 where A.SQL_ADDRESS = B.ADDRESS<br/>
   AND A.SQL_HASH_VALUE = B.HASH_VALUE<br/>
<br/>
   --后面可以加上你要的约束条件<br/>
   and OSUSER = 'Unmi' AND USERNAME = 'APPS' and PROGRAM = 'JDBC-1.0-Client'</pre>

自行决定要查询出来的字段以及约束条件。
