---
title: PhoneGap, 第一个应用
url: /phonegap-first-application/
date: 2014-01-25T20:41:28-06:00
featured: false
draft: true
toc: false
# menu: main
usePageBundles: true
categories:
  - Mobile
tags: 
  - Mobile
  - ios
  - PhoneGap
comment: true
codeMaxLines: 50
# additional
wpPostId: 6131 
wpStatus: publish
views: 1278
lastmod: 2014-01-26T02:50:33-06:00
---

移动开发有三条路，Native, HTML5 和 Hybrid，Native 可以把各种平台的特性充分发挥，HTML5 简单，可限制太多，混合型是个折中的办法。对于那些不很注重特效又需要访问部分本地资源的应用可采用 Hybrid 的方式，而其中的佼佼者就数 PhoneGap，又说 Cordova。它们是两个主，却又基本相似的东西，见&nbsp;<a href="http://phonegap.com/2012/03/19/phonegap-cordova-and-what%E2%80%99s-in-a-name/" target="_blank">PhoneGap, Cordova, and what’s in a name?</a><br/>
<br/>
我们既可以选择 PhoneGap，也可以选择 Cordova，安装使用起来基本类似，再往下的发展的就无定数了。鉴于 PhoneGap 依托于 Adobe 那么一个强大的后台，我还是选择试用下 PhoneGap，并且 Adobe 还为它提供了在线构建和源码托管 <a href="http://build.phonegap.com" target="_blank">http://build.phonegap.com</a>。当然这是一家像 Oracle 那样商业气息比较浓的公司，使用在线构建免费用户只能建立一个应用。<br/>
<br/>
现在看一个应用 PhoneGap 的例子，从安装开始，演示平台为 Mac, 其他平台都类似。PhoneGap 可由 NodeJS 来安装，所以首先要在 <a href="http://nodejs.org" target="_blank">http://nodejs.org</a> 安装 NodeJS。然后执行下面的命令安装 phonegap:<!--more--><br/>
<blockquote>$ sudo npm install -g phonegap</blockquote>

安装后在 /usr/local/bin 下就有 phonegap 命令了，现在就用 phonegap 来创建自己的应用了，新版的 PhoneGap 不会在 Xcode 中安插项目模板了，一切都在控制台下进行<br/>
<blockquote>$ phonegap create MyApp cc.unmi.myapp MyApp</blockquote>

上面第一个 MyApp 是路径，即创建在 MyApp 目录中，第二个 MyApp 是应用的名称，即项目名，它们通常按照习惯是一致的。中间的 cc.unmi.myapp 是 Bundle Identifier，作为应用的标识名。<br/>
<br/>
上面命令执行后会在 MyApp 目录中产生四个目录<br/>
<br/>
merges, platforms, plugins, 和 www，www 目录就是有些话那些页面相关的资源，我们基本是在这个目录下工作的，里面的 index.html 就是 PhoneGap 的入口页面，差不多可认为是应用的入口。<br/>
<br/>
怎么构建运行呢，先进到工程目录，执行 build<br/>
<blockquote>$ cd MyApp<br/>
$ phonegap local build ios</blockquote>

现在差不多可以 phonegap run ios 命令了，不过第一次运行如果提示 missing ios-sim，就要安装 ios-sim<br/>
<blockquote>#如果运行 phonegap run ios 提示 missing ios-sim 就安装它<br/>
sudo npm install -g ios-sim</blockquote>

正式运行 run 命令了, 其实&nbsp;<code>phonegap run ios</code> 命令也会执行构建工作的<br/>
<blockquote>$ phonegap run ios</blockquote>

一切正常的话，iOS 模拟器就出来了<br/>
<p style="text-align: center;"><img class="aligncenter  wp-image-6038" alt="phonegap-demo-app" src="http://unmi.cc/wp-content/uploads/2014/01/phonegap-demo-app.png" width="300" /></p>

留给我们编程处理的基本就是 MyApp/www 中的内容，比如引入 jQuery Mobile 来实现界面，PhoneGap 在其中只是担当了一个 HTML 到 Native 的一个桥梁作用。再借助于 PhoneGap 的插件可进一行接近 HTML 与 Native 的距离。<br/>
<br/>
每次编辑完 MyApp/www 中的内容后只需要运行<br/>
<blockquote>$ $ phonegap run ios</blockquote>

就能看到最新效果了。<br/>
<br/>
执行了前面的&nbsp;&nbsp;<code>phonegap local build ios</code> 后可以看到在 MyApp/platforms/ios 有了个 XCode 工程了，用 XCode 打开它可以在 XCode 里运行，不过在这个项目里编辑的是 platforms/ios/www 的内容，每次&nbsp;<code>phonegap local build ios</code> 又会覆盖掉。<br/>
<br/>
因为 PhoneGap 支持主流的移动平台，使用与上面上面类似的命令可以构建出 Android, Windows Phone 等工程并运行。<br/>
<br/>
参考：1. <a href="http://docs.phonegap.com/en/3.0.0/guide_cli_index.md.html" target="_blank">The Command-line Interface</a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2. <a href="https://github.com/phonegap/phonegap-cli" target="_blank">https://github.com/phonegap/phonegap-cli</a>
