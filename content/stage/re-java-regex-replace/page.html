---
title: 再说 Java 中使用正则表达式进行后向引用($1,$2...)
url: /re-java-regex-replace/
date: 2012-08-17T10:31:18-05:00
featured: false
draft: true
type: post
toc: false
# menu: main
usePageBundles: true
categories:
  - Java/JEE
tags: 
  - Java
  - Regex
comment: true
codeMaxLines: 50
# additional
wpPostId: 4701 
wpStatus: publish
views: 3544
lastmod: 2021-09-03T14:58:43-05:00
---

前面通过 <a title="在 Java 中使用正则表达式进行后向引用($1,$2...)" href="http://unmi.cc/java-regex-replace-string" target="_blank" rel="noopener">在 Java 中使用正则表达式进行后向引用($1,$2...)</a> 讲了在 Java 中使用 JavaScript 和 JRegex 来实现正则表达式的后向分组引用 $1, $2 替换。<br/><br/>
自 JDK 1.4 出现正则表达式以来我还真不知道 Java 的正则表达式是可以在替换时用 $1, $2 达成后向分组替换的，所以前一篇表述有些出入的。也就是要实现 JavaScript 中的<br/><br/>
<pre class="lang:default decode:true ">&lt;script&gt;
    var src = "abc def";
    var des = src.replace(/(\w+)\s+(\w+)/, "$2 $1");
    document.write(des);
    //输出为： def abc
&lt;/script&gt;</pre>
<br/>
的功能，完全可以不求助于第三方的正则表达式组件库或是通过 ScriptEngine + JavaScript 来实现，在 Java 字符串的:<br/><br/>
<span style="color: #800000;">public String replaceFirst(String regex, String replacement)</span><br />
<span style="color: #800000;">public String replaceAll(String regex, String replacement)</span><br/><br/>
两方法的第三个参数中是可以用 $1, $2 ... 来引用第一个参数的括号分组的，简单 Java 示例代码如下：<br/><br/>
<pre class="brush:java">"abc def".replaceFirst("(\\w+)\\s+(\\w+)", "$2 $1"); //结果为 def abc
"abc def aaa bbb".replaceAll("(\\w+)\\s+(\\w+)", "$2 $1"); //结果是 def abc bbb aaa</pre>
<br/>
Java 的正则表达式原本还是很强大的，只怕不能被人发现。<br/><br/>
2015-07-14： 补充一点，在正则表达式外是用  $1, $2 ... 来进行后向引用，如果是在正则表达式中就需要用  \1, \2 ... 的形式来进后向引用。下面例子，替换重复出现的两位数及之间的内容<br/><br/>
<pre class="brush:java">"xx12abcd12345".replaceAll("(\\d{2}).+?\\1", ""); //结果为 xx345</pre>
