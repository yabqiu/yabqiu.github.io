---
title: Play 2.0 中文资料 - 编写测试
url: /play2-0-tutorials-cn-writing-tests/
date: 2013-01-15T11:36:42-06:00
featured: false
draft: true
toc: false
# menu: main
usePageBundles: true
categories:
  - Scala
  - PlayFramework
tags: 
  - 翻译
  - Scala
  - PlayFramework
comment: true
codeMaxLines: 50
# additional
wpPostId: 4905 
wpStatus: publish
views: 521
lastmod: 2013-01-15T12:18:11-06:00
---

<ul style="float: right; border-left: solid 1px green; border-bottom: solid 1px green;"><br/>
	<li><a href="/play2-0-tutorials-cn-writing-tests" target="_blank">编写测试 </a></li>

	<li><a href="/play2-0-tutorials-cn-writing-functional-tests" target="_blank">编写功能性测试 </a></li>

</ul><br/>
<span style="color: #0000ff;">Unmi&nbsp;注:&nbsp;当你采用 TDD&nbsp;进行开发过一段时间后，很快你就会对&nbsp;TDD&nbsp;产生依恋了。没直正去实践过&nbsp;TDD，对于测试先行的提法只会觉得是一种理想状态。其实不然，从此开发模式变成&nbsp;测试-&gt;实现-&gt;重构，同时也指导你的设计，基础架构并不需要那么稳定，它总在应需而变。所以&nbsp;TDD&nbsp;让你不该总在项目中后期抱怨架构设计不好之类的事，因为主动权一直在你。废话一堆后就是：测试真的很重要，尽快进入角色吧。</span><br/>
<br/>
<strong><span style="font-size: large;">测试你的应用程序</span></strong><br/>
<br/>
测试源代码文件必须放置在你的应用的 <code>test</code>&nbsp;目录下.&nbsp;你可以在 Play&nbsp;控制台下用&nbsp; <code>test</code> 和 <code>test-only</code>&nbsp;任务来运行它们.<br/>
<br/>
<strong><span style="font-size: medium;">使用 specs2</span></strong><br/>
<br/>
测试一个 Play 2&nbsp;应用默认的方式是采用 <a href=" http://etorreborre.github.com/specs2/">specs2</a>.<br/>
<br/>
单元规格须继承自 <code>org.specs2.mutable.Specification</code> 特质并应用 should/in&nbsp;的格式:<!--more--><br/>
<pre class="brush:scala">import org.specs2.mutable._<br/>
<br/>
import play.api.test._<br/>
import play.api.test.Helpers._<br/>
<br/>
class HelloWorldSpec extends Specification {<br/>
<br/>
  "The 'Hello world' string" should {<br/>
    "contain 11 characters" in {<br/>
      "Hello world" must have size(11)<br/>
    }<br/>
    "start with 'Hello'" in {<br/>
      "Hello world" must startWith("Hello")<br/>
    }<br/>
    "end with 'world'" in {<br/>
      "Hello world" must endWith("world")<br/>
    }<br/>
  }<br/>
}</pre>

<strong><span style="font-size: medium;">在虚构的应用中运行</span></strong><br/>
<br/>
假如你的测试代码需求依赖一个运行中的应用,&nbsp;你可以轻易的立马创建一个 <code>FakeApplication</code>:<br/>
<pre class="brush:scala">"Computer model" should {<br/>
<br/>
  "be retrieved by id" in {<br/>
    running(FakeApplication()) {<br/>
<br/>
      val Some(macintosh) = Computer.findById(21)<br/>
<br/>
      macintosh.name must equalTo("Macintosh")<br/>
      macintosh.introduced must beSome.which(dateIs(_, "1984-01-24"))  <br/>
<br/>
    }<br/>
  }<br/>
}</pre>

你还能传递 (或覆盖)&nbsp;掉虚构应用的附加的配置信息,&nbsp;或者模拟(mock) 任何的插件.&nbsp;例如，创建一个 <code>FakeApplication</code>&nbsp;并默认使用内存数据库:<br/>
<pre class="brush:scala">FakeApplication(additionalConfiguration = inMemoryDatabase())</pre>
