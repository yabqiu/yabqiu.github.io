---
title: VMware+Linux AS4 为虚拟机新增了硬盘，该如何加载？[摘]
url: /vmware-linux-as4-add-new-harddis/
date: 2008-03-31T23:21:00-05:00
featured: false
draft: true
toc: false
# menu: main
usePageBundles: true
categories:
  - Linux/Unix
tags: 
  - Linux
  - VMware
comment: true
codeMaxLines: 50
# additional
wpPostId: 423 
wpStatus: publish
views: 282
lastmod: 2010-08-19T12:21:26-05:00
---

VMware 中安装了 Linux 后，又给这个虚拟机增加一个硬盘，假设选的类型是 SCSI， 进到虚拟机系统中应如何加载呢？<br/>
<br/>
其实这后 Linux 新加了一个物理硬盘是一回事，做法如下：<br/>
<br/>
在服务器上把硬盘接好，启动linux，以root登陆。<br/>
<br/>
比如我新加一块SCSI硬盘，需要将其分成三个区：<br/>
<br/>
#fdisk /dev/sdb<br/>
进入fdisk模式：<br/>
Command (m for help):p //查看新硬盘的分区<br/>
Command (m for help):n //创建新分区 <!--more--><br/>
<br/>
可以用m命令来看fdisk命令的内部命令；n命令创建一个新分区；d命令删除一个存在的分区；p命令显示分区列表；t命令修改分区的类型ID号；l命令显示分区ID号的列表；a命令指定启动分区；w命令是将对分区表的修改存盘让它发生作用。<br/>
<br/>
Command action<br/>
e extended //输入e为创建扩展分区<br/>
p primary partition (1-4) //输入p为创建主分区，这里我们选择p<br/>
<br/>
Partion number(1-4)：1 //第一个扩展分区，按你需求可以最多分4个主分区<br/>
First Cylinder(1-1014,default 1): 1 //第一个主分区起始的磁盘块数<br/>
Last cylindet or +siza or +sizeM or +sizeK: +1024MB //可以是以MB为单位的数字或者以<br/>
<br/>
磁盘块数，这里我们输入+1024MB表示分区大小为1G。<br/>
这样我们就创建完一个分区，如果要创建更多分区可以照上面的步骤继续创建。<br/>
<br/>
创建完后用w保存分区。<br/>
<br/>
Command (m for help): w<br/>
The partition table has been altered!<br/>
<br/>
Calling ioctl() to re-read partition table.<br/>
Syncing disks.<br/>
这样就分区完，我们还要进行格式化<br/>
<br/>
#mkfs -t ext3 -c /dev/sdb1 //如果有多个分区，则分区修改为sdb2。这样格式化完后我们需要进行挂载分区，<br/>
<br/>
#mkdir www //创建/www目录，我们将把新的分区挂到www下<br/>
#mount /dev/sdb1 /www //将/dev/sdb1挂载到/www<br/>
# df //用df命令进行查看<br/>
Filesystem 1K-blocks Used Available Use% Mounted on<br/>
/dev/sda2 3771316 1388956 2190788 39% /<br/>
/dev/sda1 101089 9463 86407 10% /boot<br/>
none 62988 0 62988 0% /dev/shm<br/>
/dev/sdb1 485906 8239 452580 2% /www //看到了，这就是我们刚才新挂载的分区<br/>
到这里我们工作已接近尾声了，不过我们如果这样就结束的话，我们每次重新启动服务器后都要进行手工挂载，这样很麻烦，我们需要修改/etc/fstab文件来进行自动挂载。<br/>
<br/>
#vi /etc/fstab<br/>
在文件的末尾填加如下内容：<br/>
<br/>
/dev/sdb1 /www ext3 defaults 1 2<br/>
如有多个分区可修改sdb1和/www，修改完后保存，重起服务器。<br/>
<br/>
到此我们添加新硬盘的工作结束了。<br/>
<br/>
照着作应该没问题的<br/>
<br/>
摘自：<a href="http://www.xuniji.com/forum/view.asp?id=8725&amp;p=6">http://www.xuniji.com/forum/view.asp?id=8725&amp;p=6</a>   <a href="http://www.xuniji.com">虚拟机之家</a>
