---
title: Vi 寄存器操作，及使用系统剪贴板
url: /vi-registers-system-clipboard/
date: 2014-11-09T21:26:51-06:00
featured: false
draft: false
type: post
toc: false
# menu: main
usePageBundles: true
categories:
  - Linux/Unix
tags: 
  - vi
comment: true
codeMaxLines: 50
# additional
wpPostId: 6700 
wpStatus: publish
views: 1009
lastmod: 2014-11-09T21:50:08-06:00
---

使用 Vi 不得不提它强大的寄存器功能，一般操作系统只支持单例的剪贴板操作，而 Vi 借助于寄存器，相当于有几十个剪贴板可以使用。Vi 中针对内容的操作会记入到寄存器中，包括复制，粘贴，删除，以及只读的寄存器和与系统剪贴板交换内容的寄存器。本文最初目的是怎么与系统剪贴板交换内容。<br/>
<br/>
在 Vi 中使用 :reg (:registers 或 :dis/:display) 命令显示寄存器中的内容<br/>
<br/>
<img class="aligncenter size-large wp-image-6701" src="http://unmi.cc/wp-content/uploads/2014/11/vi-registers-800x397.png" alt="vi-registers" width="800" height="397" /><br/>
<br/>
主要寄存器<br/>
<br/>
<!--more-->未命名寄存器  <code>"</code>   最近一次复制 或删除的广西<br/>
数字寄存器  <code>0-9</code>  文本删除历史<br/>
命名寄存器 <code>a-z</code>, <em><code>A-Z</code></em>  用户自定义寄存器，A-Z 为追加内容到相应的 <code>a-z</code> 寄存器<br/>
只读寄存器 <code>%</code>, <code># </code>, <code>.</code>, <code>:</code>  分别为当前文件名，交替文件的名字，上次插入的文本，上次招待的命令<br/>
系统剪贴板 <code>*</code><br/>
搜索模式寄存器 <code>/</code><br/>
<br/>
现在来看那么多寄存器的使用<br/>
<br/>
通常我们用  <code>yy</code> yank 到的内容默认放在 <code>"</code> 和 <code>0</code> 寄存器中，与之相对的 <code>p</code> (put) 也是从 " 寄存器中获得内容的，如果要使用自定义的寄存器，可以用使用<br/>
<br/>
<code>"3yy</code> 或 <code>"ayy</code>, 这样会把当前行的内容放到 <code>3</code> 或 <code>a</code> 寄存器中<br/>
相应的 <code>"3p</code> 或 <code>"ap</code> 就是从 <code>3</code> 或 <code>a</code> 寄存器中复制内容到当前位置<br/>
<br/>
我们知道系统剪贴板寄存器是 <code>*</code>，所以相应的操作就是 <code>"*yy</code> 和 <code>"*p</code>，这样就实现了与系统剪贴板的文本数据交换了。<br/>
<br/>
寄存器操作总是以 <code>"</code> 一个双引号开始的。<br/>
<br/>
在有些 Vi (如 Mac 系统自带的 Vi 和 GUI Vi) 中可以使用 CMD+C, CMD+V, 或 Shift+Insert 进行系统剪贴板的操作<br/>
<br/>
可以用命令设置寄存器的内容，如 <code>let @a="1234"</code>，设置寄存器 <code>a</code> 的内容为 "1234"<br/>
<br/>
在粘贴时为防止像 autoindent 自动格式化，最好设置为粘贴模式 <code>:set paste</code>, 完事后恢复为 <code>:set nopaste</code>。我之前采用过的做法是用 :set noautoindent 设置为非自动退格方式来进行粘贴。<br/>
<br/>
Vi 寄存器中的内容可以在文件 <code>~/viminfo</code> 中找到，也就是说退出 Vi 后重新进入，寄存器的内容仍然可用。<br/>
<br/>
更多内容自然是用 <code>:help registers</code> 和 <code>:help copy-move</code>.<br/>
<br/>
参考：  <a href="http://my.oschina.net/shelllife/blog/144357" target="_blank">VIM使用系列：寄存器与复制粘贴缓冲区</a>
