---
title: Java NIO 入门学习(通道和缓冲区)
url: /java-nio-channel-buffe/
date: 2010-03-18T02:30:00-05:00
featured: false
draft: true
type: post
toc: false
# menu: main
usePageBundles: true
categories:
  - Java/JEE
tags: 
  - Java
  - NIO
  - Channel
  - Buffer
comment: true
codeMaxLines: 50
# additional
wpPostId: 216 
wpStatus: publish
views: 676
lastmod: 2018-06-29T19:25:19-05:00
---

<p>对于 NIO 来说，Channel(通道) 和 Buffer(缓冲区) 这两个东西是不得不提的，因为它们是 NIO 的核心对象，几乎每一个 I/O 操作都要它们。</p>

<p>通道是对原 I/O 流的模拟，但有不同的是它是双向的，不再像流那样分 InputStream 和 OutputStream，通道的双向性更好的反映了底层操作系统的真识情况。也不能像原 I/O 那样可以直接往流里写或读数据，在通道了传输数据必须经由缓冲区。有点类似原 I/O 流通过过滤器流 BufferedInputStream 和 BufferedOutputStream 来读写数据。</p>

<p>FileInputStream/FileOutputStream/RandomAccessFile/DatagramSocket/ServerSocket/Socket 的 getChannel() 方法可以获得相应类型的 Channel，Channel 的类型有 FileChannel/SocketChannel/SelectableChannel/DatagramChannel/ServerSocketChannel 等。<!--more--></p>

<p>在通道上的读写都会关联上缓冲区，如 FileChannel.read(ByteBuffer dst)、FileChannel.write(ByteBuffer src)；对文件的锁也是在通道上的操作，如 FileChannel.lock()、FileChannel.tryLock()。</p>

<p>Buffer 接口的实现类有 ByteBuffer/MappedByteBuffer/CharBuffer/DoubleBuffer/FloadBuffer/IntBuffer/LongBuffer/ShortBuffer，用得多的还就是 ByteBuffer。在 Buffer 上则是些存取数据和数据定位的操作。</p>

<p>下面是 NIO 和原 IO 的一些概念对比：</p>

<div><img src="/wp-content/uploads/2010/03/nio-oio.jpg" alt="" /></div>

<p>其他的如 SocketChannel 网络通道还未述及，理解了 NIO 通道和缓冲区的概念之后，我们就可以使用 NIO 来对文件进行读写操作了。</p>
