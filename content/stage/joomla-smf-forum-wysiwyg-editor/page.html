---
title: Joomla 扩展使用手记：给 SMF 论坛加上 WYSIWYG 编辑器
url: /joomla-smf-forum-wysiwyg-editor/
date: 2009-09-17T03:18:00-05:00
featured: false
draft: true
toc: false
# menu: main
usePageBundles: true
categories:
  - Joomla
tags: 
  - Joomla
  - SMF
  - wysiwyg
comment: true
codeMaxLines: 50
# additional
wpPostId: 232 
wpStatus: publish
views: 1062
lastmod: 2011-03-25T21:14:18-05:00
---

目的：为 Joomla 1.5.x 配一款好论坛，当初想着安装一个论坛组件，现在想来还是装个独立的论坛程序，然后与 Joomla 桥接起来。第三方独立的论坛基本还是好过 Joomla 的论坛组件，而且更具生命力。看看 FireBoard 的历程就知道了：<br/>
<br/>
JoomlaBoard(1.1)   ---&gt;  FireBoard(1.0.5RC)                ----&gt; 分支一：F!BB(Frenzy Bulletin Board 1.5.96RC)<br/>
(已停止开发)     (开发停止,原生不支持 J1.5.x)       |----&gt;分支二：Kunena Forum(1.5.5)<br/>
<br/>
F!BB 和 Kunena Forum 都是在 FireBoard 基础开发的，原生支持 J1.5.x，两支一分，恐怕不好说是丰富了用户的选择，而是造了个岔道口，也显现其气数。且它们用的都不是 WYSIWYG(所见即所得) 的编辑器，即使有个像 Joomla 发文章那种就满足了，现在是各种 RichEditor 横行的时候谁愿意记些 BBCode。<!--more--><br/>
<br/>
而其他开源独立的 PHP 论坛，如 phpBB3、SMF、MyBB 等都一直持续着在开发中。第一感觉对 SMF 有些好感，但它同样只能用 BBCode 发贴，即使是 SMF2 也没得到改观，所以才想着能不能给它换个 WYSIWYG 编辑器，最后试验的结果是可行的。<br/>
<br/>
SWF(<a href="http://www.simplemachines.org/">http://www.simplemachines.org/</a>)，当年最新版本是：1.x 是 SMF 1.1.7；2.x 是 SM 2.0 RC 1.2。因为这里要用到了是 SMF 的一个模块(SMF 也支持模块的哦) HotEditor v4.2 Mod，从官方下载的 HotEditor v4.2 Mod 说是支持 SMF 1.1.4(<a href="http://www.ecardmax.com/ehelpmax/download.php?step=download_public&amp;dl_id=30" target="_blank">HotEditor V.4.2 MOD for SMF 1.1.4</a>)，不过你可以试试其他的 SMF 版本，不行的话 Hack Hack 就可以了。<br/>
<br/>
试过 HotEditor 1.1.7.rar 在 SMF 1.1.10 下不可用。<br/>
<br/>
本文所使用的软件版本是：1. SMF 1.1.7 中文版（下载地址：<a href="http://d.download.csdn.net/down/876856/keyunq">http://d.download.csdn.net/down/876856/keyunq</a>）<br/>
2. 已打成 SMF 模块的安装文件（下载地址：<a href="http://www.simplemachines.org/community/index.php?action=dlattach;topic=284316.0;attach=81729">http://www.simplemachines.org/community/index.php?action=dlattach;topic=284316.0;attach=81729</a>）<br/>
<br/>
安装 SMF1.1.7 的步骤这里就不说了，假设 SMF 安装所在目录用 $smf_root 表示。下面先说下如何用 HotEditor 1.1.7.rar  来安装那个编辑器。<br/>
<br/>
1) 解压 HotEditor 1.1.7.rar，把其中的 richedito 目录和 hoteditor_quickedit.html 文件解压到 $smf_root/ 目录中<br/>
2) 把 HotEditor 1.1.7.rar  中的 hoteditor.4.2_smf.1.1.2.zip 文件解压放到某一目录下。其中命名是 smf.1.1.2，先不管它。<br/>
3) 然后进到 SMF 的后台管理，进到<strong>插件程序</strong>，在<strong>已下载的插件</strong>标签中，浏览上一步解压出来的 hoteditor.4.2_smf.1.1.2.zip，然后上传。上传成功后，在显示的页面上，点 <strong>使用插件模块</strong> 即可。注意这里的链接可能因你的中文版本翻译而不同。<br/>
<div><img class="aligncenter" src="/wp-content/uploads/2011/03/SmfHoteditorInstall.png" alt="" width="740" height="232" /></div>

在下一个页面，如果显示的是：无安装和卸载动作!，那安装将不成功。顺利的话，会出现如下页面：<br/>
<div><img class="aligncenter" src="/wp-content/uploads/2011/03/SmfHoteditorInstall1.png" alt="" width="740" height="330" /></div>

点击 现在安装 按钮，我想应该是会提示你：安装插件成功，您现在可以使用插件提供的功能了。 这样表示安装 HotEditor 成功了。<br/>
<br/>
迫不及待了，到前后看看效果如何，现在无论是回贴还是发新贴都可以用 WYSIWYG 编辑框了：<br/>
<div><img class="aligncenter" src="/wp-content/uploads/2011/03/SmfHoteditorEffect.png" alt="" width="750" height="612" /></div>

你的论坛可以简单的发布更漂亮的内容了。<br/>
<br/>
. 假如你觉的编辑框的按钮太多，可以编辑 $smf_root/richedit/editor.js 来定制。<br/>
<br/>
. 现在这个编辑框只是应用中默认主题下的，如果要应用于其他主题，可编辑其他主题包下的模板文件(如 $smf_root/Themes/babylon/Display.template.php 等)。<br/>
<br/>
. 编辑器的风格你可以修改 $smf_root/richedit/styles/office2007 下的图片或样式表，或另建一套风格，然后到 $smf_root/richedit/editor.js 中指定新风格的目录。<br/>
<br/>
. 编辑 $smf_root/Themes/default/ 中不同的模板文件可以定制快速回贴时用简单的编辑器，发贴或正式回贴用更强功能的编辑器。<br/>
<br/>
. 还有，你是不是发现了编辑器按钮上的语言不对，关键还不是英文。对啊，这就是嚼人家软饭的后果，所以下面推荐你手工安装 Hoteditor_mod_SMF。<br/>
<br/>
前面安装 HotEditor 的过程是用了别人做成的 SMF 插件模块进行的，你也可以按照下载的 <a href="http://www.ecardmax.com/ehelpmax/download.php?step=download_public&amp;dl_id=30" target="_blank">hoteditor_smf_mod.zip</a> 文件中的 Hotedior_Mod_SMF.txt 中的说明来手工安装，无需进到论坛管理后台。<br/>
<br/>
大致步骤是：<br/>
<br/>
1. 仍要把 richedit 目录和 hoteditor_quickedit.html 文件拷到 $smf_root/ 目录中<br/>
<br/>
2. 依照 Hoteditor_Mod_SMF.text 中的说明依次修改以下文件：<br/>
Themes/default/Display.template.php,<br/>
Themes/default/Post.template.php,<br/>
Themes/default/Profile.template.php,<br/>
Themes/default/script.js<br/>
Themes/classic/Post.template.php<br/>
Sources/Subs.php<br/>
<br/>
这样手工安装，你可以顺便理解以上几个文件的功能，定制不同时候的编辑器风格，或把该编辑器应用到其他论坛风格上去。<br/>
<br/>
这样做也可以试着给 SMF 1.1.10 或 SMF 2.0 版的论坛加上这个编辑器。<br/>
<br/>
也可以试着做出自己的 Hoteditor_For_SMF 1.1.10 或 Hoteditor_For_SMF 2.0，你只要仔细看记事本打开 hoteditor.4.2_smf.1.1.2.zip 中的 hoteditor.mod 文件，对照一下前面那个 Hoteditor_Mod_SMF.txt 就知道怎么做了。<br/>
<br/>
SMF 搞定了，下一步还得找个能桥接 SMF 1.1.x 和 Joomla 1.5.x 的好组件，最好是个大礼包。大致试了下整合，基本就是能在 Joomla 建个指向到 SMF 的菜单，整合用户，后台管理没法整合到一起，不是很爽。<br/>
<br/>
参考：1. <a href="http://www.simplemachines.org/community/index.php?topic=307763.0" target="_blank">SMF WYSIWYG Editor</a>（<a href="http://www.simplemachines.org/community/index.php?action=dlattach;topic=284316.0;attach=81729" target="_blank">HotEditor 1.1.7.rar</a>）<br/>
2. <a href="http://www.ecardmax.com/ehelpmax/index.php?step=passurl&amp;url=http%3A//www.ecardmax.com/ehelpmax/download.php" target="_blank">How to add/remove HotEditor default buttons.</a>
