---
title: Mac OS X 下开发 Android 程序时使用 USB 连真机调试
url: /mac-osx-dev-android-usb/
date: 2014-04-30T23:47:42-05:00
featured: false
draft: true
toc: false
# menu: main
usePageBundles: true
categories:
  - Android
tags: 
  - android
  - Mac OS
comment: true
codeMaxLines: 50
# additional
wpPostId: 6443 
wpStatus: publish
views: 4995
lastmod: 2014-04-30T23:47:42-05:00
---

本人很早一篇 <a title="Mac OS X 下开发  Android 程序时使用 WiFi ADB 连真机调试" href="http://unmi.cc/mac-osx-dev-android-wifi-adb/" target="_blank">Mac OS X 下开发 Android 程序时使用 WiFi ADB 连真机调试</a>，手机端需要连接  WiFi, Root 权限开启 ADB 端口，电脑上执行 adb connect 命令来让 Mac 连接 Android 真机进行调试，其实用不着那么麻烦。<br/>
<br/>
即使是现在新版的 Andorid SDK Manager 里的 <code>Google USB Drive  Not compatible with Mac OS X</code>，并不是说不支持 USB 连接 Android 手机，而是在 Mac 下根本用不着安装这个驱动，有些知名手机直接 USB 连上 Mac 就能被 DDMS 发现。<br/>
<br/>
而我在用一个小米的手机在连机测试，不被 DDMS 识别，解决办法是把小米手机的 Vendor ID 加到文件 <code>~/.android/adb_usb.ini</code> 中去就行。<br/>
<br/>
<a href="http://developer.android.com/tools/device.html" target="_blank">Using Hardware Devices</a> 里有很多手机品牌商的 Vendor ID，没有小米的，不急，手机连上 Mac 从设备信息里查相应的 USB 连接端口上能找到。<!--more--><br/>
<br/>
<img class="aligncenter size-full wp-image-6445" src="http://unmi.cc/wp-content/uploads/2014/04/mac-andorid-vendor-id.png" alt="mac-andorid-vendor-id" width="751" height="520" /><br/>
<br/>
上图看到我的小米 1 手机的 Vendor ID 是<code>0x18d1</code>，把它添加到 <code>~/.android/adb_usb.ini</code> 最后一行去，可以用编辑器(如 VI) 来添加，直接用命令<br/>
<blockquote>echo "0x18d1" &gt;&gt; ~/.android/adb_usb.ini</blockquote>

小米 2 的手机的 Vendor ID 好像是 <code>0x2717</code><span style="color: #464646;">。</span><br/>
<br/>
然后重启下 ADB 服务，命令是<br/>
<blockquote>adb kill-server<br/>
adb server</blockquote>

用 ps -ef|grep adb 可以看到 adb 进程，如 adb -P 5037 fork-server server<br/>
<br/>
这时候，连接上小米手机就能在 DDMS 中看到了(其中有些允许手机调试的提示和往常是一样的)<br/>
<br/>
<img class="aligncenter size-full wp-image-6446" src="http://unmi.cc/wp-content/uploads/2014/04/mac-android-ddms.png" alt="mac-android-ddms" width="697" height="140" /><br/>
<br/>
USB 连接 Android 设备调试要方便多了，不用担心网络会断掉，ADB 连接丢失，手机上必要时要切换网络也随意了。<br/>
<br/>
参考：<br/>
<br/>
1. <a href="http://my.eoe.cn/iceskysl/archive/4377.html" target="_blank">如何在Mac OSX上用adb或DDMS连接小米2s做调试<br/>
</a>2. <a href="http://mobile.51cto.com/aprogram-386942.htm" target="_blank">小米2及其他Android手机无法连接mac解决方案</a>
