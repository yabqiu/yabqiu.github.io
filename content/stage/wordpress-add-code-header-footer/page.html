---
title: 在 WordPress 的 Header 或 Footer 中加入代码的插件
url: /wordpress-add-code-header-footer/
date: 2010-08-28T14:13:30-05:00
featured: false
draft: true
toc: false
# menu: main
usePageBundles: true
categories:
  - WordPress
tags: 
  - wordpress
comment: true
codeMaxLines: 50
# additional
wpPostId: 2281 
wpStatus: publish
views: 3599
lastmod: 2010-08-28T14:13:30-05:00
---

做了个站点，一下想随时了解站点被访问的情况，或者进行 SEO。比如用 Google-Analytics, 也可能用了其他的站点统计服务，那就要求在页面中植入一段 JS 代码，如果每次有新需求都打开主题的 footer.php 文件来改就有点麻烦些。也存在往 header.php 中加入些信息的情况，比如 meta, css, js 等, 如果有个插件统一来管理有容易得多，省得直接改文件。<br/>
<br/>
去 WordPress 中搜索 Footer 就能看到一些解决此问题的插件，有好几个。类似的东西多了也好让人眼花的，就像商场里买东西，太多的选择反而使人犹豫不决。我找了下，有以下几个插件：<!--more--><br/>
<br/>
1. <a href="http://wordpress.org/extend/plugins/wp-hefo/" target="_blank">wp-hefo | WordPress header &amp; footer</a> (v0.2, Last Updated: 2009-3-25)<br/>
2. <a href="http://wordpress.org/extend/plugins/header-footer/" target="_blank">Header-Footer</a> (v1.1.1, Last Updated: 2010-8-3)<br/>
3. <a href="http://wordpress.org/extend/plugins/general-headers/stats/" target="_blank">General Headers &amp; Footers</a> (v0.5, Last Updated: 2010-5-22)<br/>
4. <a href="http://wordpress.org/extend/plugins/custom-headers-and-footers/" target="_blank">Custom Headers and Footers</a> (v1.1.5, Last Updated: 2010-7-28)<br/>
5. <a href="http://wordpress.org/extend/plugins/add-to-footer/" target="_blank">Add to Footer</a> (v1.0.1, Last Updated: 2009-3-9)<br/>
6. <a href="http://wordpress.org/extend/plugins/wp-footer-html/screenshots/" target="_blank">WP Footer HTML</a> (v0.2, Last Updated: 2010-4-27)<br/>
<br/>
接下来大概介绍下其中几个插件的特性，<br/>
<br/>
<a href="http://wordpress.org/extend/plugins/wp-hefo/" target="_blank">wp-hefo | WordPress header &amp; footer</a>，安装后在 Appearance 中出现 Header &amp; Footer 菜单，大概是看到 Settings 中选项太多了，放这里倒好找。打开它就是两个输入框，一个是 Header，另一就是 Footer，分别输入往这两处插入的 HTML 代码，各自加到所有前台页面的 &lt;/head&gt; 前和 &lt;/body&gt; 前。好像也没什么特别的。<br/>
<br/>
它是通过 add_action('wp_head', array('hefo', 'wp_head')); 和 add_action('wp_footer', array('hefo', 'wp_footer'));  实现相应位置植入 HTML 代码的。<br/>
<br/>
<a href="http://wordpress.org/extend/plugins/header-footer/" target="_blank">Header-Footer</a>，安装后在 Settings 下出现 Header and Footer，它提供三个配置框，想多加介绍下它，它提供有三个输入框，看截屏：<br/>
<br/>
<img class="aligncenter" title="WordPress plugin Header-Footer" src="http://unmi.cc/wp-content/uploads/2010/08/Header-Footer.jpg" alt="" width="690" height="433" /><br/>
<br/>
有三个框，分别是插入 HTML 到首页面的 &lt;/head&gt; 前，插入 HTML 到所有页面的 &lt;/head&gt; 前，和插入 HTML 到所有页面的 &lt;/body&gt; 前。所以它除了可以区别出 Home 页面外，还有就是编辑的时候点击输入框时当前输入框会变为原来的 6 倍高，方便编辑。可就是保存成功之后页面上没有任何提示信息。<br/>
<br/>
通过 add_action('wp_head', 'hefo_wp_head'); 和 add_action('wp_footer', 'hefo_wp_footer'); 实现向 Header 和 Footer 植入 HTML 代码，这里也出现了 hefo 字样，看起来这个插件是参照前一个插件来写的。<br/>
<br/>
<a href="http://wordpress.org/extend/plugins/general-headers/stats/" target="_blank">General Headers &amp; Footers</a>， 虽然叫做 General Header &amp; Footers，但出现在 Settings 中的菜单却是 General Header，好在配置页页还叫回了 General Header &amp; Footers。它的配置和功能与 wp-hefo | WordPress header &amp; footer 是一样的，就两个固定大小输入框 Header 和 Footer。实现代码是：<br/>
<br/>
add_filter('wp_head', 'genhdr_header');<br/>
add_action('wp_footer', 'genhdr_footer',99);<br/>
<br/>
add_filter 和 add_action 倒差不多，关键是这里的 add_action('wp_footer','genhdr_footer',99) 第三个参数 99 所表明的优先级数，用较大的 99 可使得它在较后执行，也就是切入的 HTML 代码更接近 &lt;/body&gt;，这对于放置网站统计代码有利，因为它之前最好放些页面显示逻辑的代码。如果没有这个优先级参数，和其他也要向 &lt;/body&gt; 前加入插代码的插件比，插入代码的顺序就不定的。<br/>
<br/>
 <a href="http://wordpress.org/extend/plugins/custom-headers-and-footers/" target="_blank">Custom Headers and Footers</a>，安装之后在 Settings 下有 Custom Headers and Footers 进入配置界面，有四个框可以输入内容。分别是 Meta Headers、Header、Footer、Blog Footer，第一和第四项输入的东西好理解，会放到每个页面的 Header(&lt;/head&gt;) 和 Footer(&lt;/body&gt;) 前。而 Header 和 Footer 这两输入框本意是要分别放到日志页面的前后，或是单页时内容的前后，但实际上在单页时有可能显示有误，看：<br/>
<br/>
<img class="aligncenter" src="http://unmi.cc/wp-content/uploads/2010/08/custome-header-footer-2.jpg" alt="custom header footer" width="682" height="583" /><br/>
<br/>
<img class="aligncenter" src="http://unmi.cc/wp-content/uploads/2010/08/custome-header-footer-1.jpg" alt="wordpress plugin custom header footer" width="750" height="156" /><br/>
<br/>
也来看下它的实现方式，中间那两块是在 loop_start 和 loop_end 加入的：<br/>
<br/>
  add_action( 'wp_head', array( &amp;$this, 'wp_head' ) );<br/>
  add_action( 'loop_start', array( &amp;$this, 'loop_start' ) );<br/>
  add_action( 'loop_end', array( &amp;$this, 'loop_end' ) );<br/>
  add_action( 'wp_footer', array( &amp;$this, 'wp_footer' ) );<br/>
<br/>
 <a href="http://wordpress.org/extend/plugins/add-to-footer/" target="_blank">Add to Footer</a>, 它不仅提供往 Footer 中加手工加入 HTML 代码的，而且可根据你界面输入的 StatCounter 的 Project ID/Partition ID/Security String、Google Analytics 的 Web Property ID、Revinvigorate 的 Tracking ID 或 Apture 的 SiteToken 帮你生成相应的代码放置到 Footer 中。也还是带来些方便，但对国内用户未必好用，其次就是不处理 Header。不过一般我们也是只需向 Footer 加些东西。<br/>
<br/>
<a href="http://wordpress.org/extend/plugins/wp-footer-html/screenshots/" target="_blank">WP Footer HTML</a> 的功能简单就是前面的一部分功能，只能向 Footer 加入 HTML 代码，而且二选一的就是要么只向 Home 页加，要么向全部页面。<br/>
<br/>
注意，不管是前面哪个插件都只能向 Header 或 Footer 位置加入 HTML 代码，包括 &lt;script&gt;...&lt;/script&gt; 代码，就是放在 &lt;/head&gt; 或 &lt;/body&gt; 前的部分，不能嵌入 php 程序，但你硬要放也没谁会说你，只是仍然以原样出现在页面源文件中。<br/>
<br/>
综上，我觉得对我来说比较合适的还是第二款 Header-Footer，你可以对它做些小改，比如想让它的优先级较低使得输出的代码靠后，就改它的 plugin.php 文件，给<br/>
<br/>
add_action('wp_footer', 'hefo_wp_footer');<br/>
<br/>
加个优先级参数，比如 99，就写成<br/>
<br/>
add_action('wp_footer', 'hefo_wp_footer', 99);<br/>
<br/>
如果愿意动手的话也可以使得该插件在保存成功后显示提示信息来，其实作者是有这个想法的，如 &lt;?php wp_nonce_field('save') ?&gt;，但有些小 Bug。<br/>
<br/>
当然，如果你确实在用 Add to Footer 插件选项中的那些插件，欲省却贴较多代码时也可用 Add to Footer 插件。
