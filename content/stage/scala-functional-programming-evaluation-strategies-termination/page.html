---
title: Scala 函数式编程学习视频 -- 求值策略和终止
url: /scala-functional-programming-evaluation-strategies-termination/
date: 2014-09-27T14:46:24-05:00
featured: false
draft: true
toc: false
# menu: main
usePageBundles: true
categories:
  - Scala
tags: 
  - Scala
  - Video
comment: true
codeMaxLines: 50
# additional
wpPostId: 6656 
wpStatus: publish
views: 379
lastmod: 2014-09-27T15:11:41-05:00
---

本视频继续讲了 CBN(Call By Name) 和 CBV(Call By Value)，它们就是一种求值策略。一般的 Scala 是采用 call-by-value，当函数的参数是使用的 <code>=&gt;</code> 来声明参数，就是 call-by-name, =&gt; 是 Lambda 用的符号，y 有点像是个函数参数。<code>=&gt; 就是告诉这个参数会采用 call-by-name</code>。看个例子：<br/>
<blockquote>def constOne(x: Int, y: =&gt; Int) =1 //函数返回一个常数，x, y 分别是 CBV, CBN<br/>
constOne(23, (1 to 1000000000).foldLeft(0){(a,b)=&gt;a+b}) //CBN, 把 foldLeft 表达式传给 constOne，希望在 constOne 中计算，所以很快<br/>
constOne((1 to 1000000000).foldLeft(0){(a,b)=&gt;a+b}, 23) //CBV, 计算出 foldLeft 后值传给 constOne，所以很慢</blockquote>

上面的 constOne(x: Int, y: =&gt; Int) = 1 用 scalac 编译后再 javap -c 反编译看到的是：<br/>
<blockquote>public int constOne(int, scala.Function0&lt;java.lang.Object&gt;);<br/>
Code:<br/>
0: iconst_1<br/>
1: ireturn</blockquote>

<!--more--><br/>
<br/>
多数情况下我们只需用 CBV，这是标准选择，因为它效率高，一般函数的参数都会用到，不管是在进函数之前还是在函数中计算。<br/>
<br/>
没怎么清楚 termination 终止讲的是什么。<br/>
<br/>
本视频讲义：<a href="http://unmi.cc/wp-content/uploads/2014/09/week1-3.pdf" target="_blank">week1-3.pdf</a><br/>
<br/>
http://v.youku.com/v_show/id_XNzg3MDYyMTgw.html
