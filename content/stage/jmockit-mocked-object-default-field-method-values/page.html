---
title: JMockit 中被 Mocked 的对象属性及方法的默认值
url: /jmockit-mocked-object-default-field-method-values/
date: 2017-11-12T01:03:40-06:00
featured: false
draft: true
type: post
toc: false
# menu: main
usePageBundles: true
thumbnail: "../images/logos/https://unmi.cc/wp-content/uploads/2017/11/jmockit-logo.png"
categories:
  - Java/JEE
tags: 
  - jMockit
comment: true
codeMaxLines: 50
# additional
wpPostId: 8364 
wpStatus: publish
views: 806
lastmod: 2021-09-10T12:54:05-05:00
---

前脚研究完 <a href="/mockito-mocked-default-fields-method-returns/">Mockito 中被 Mocked 的对象属性及方法的默认值</a>, 虽然目今更多的是拥抱着 Mockito, 但总有时对 JMockit 也会挤眉弄眼，谁叫 JMockit 无所不能呢！被 Mockito 的 Mock 对象方法的默认返回值洗脑之后，进而觉察出 JMockit 应该有同样的实现方式。</p>
<br/>
经过类似的测试，这里不详细列出测试过程，只是在基于前篇的测试中加入 JMockit 的依赖，最新版是 1.36。测试类 MyClassTest 中使用<br/><br/>
<pre class="lang:default decode:true ">@Mocked
private MyClass myClass;</pre>
<br/>
来构造 MyClass 的 mock 对象 myClass, 其余代码是一样的。相关代码请前往上篇 <a href="/mockito-mocked-default-fields-method-returns/">Mockito 中被 Mocked 的对象属性及方法的默认值</a> 中找。 使用 JMockit 后跑出来的效果如下：<!--more--><br/><br/>
<blockquote>
fields ---- <br />
integer: 0<br />
array: null<br />
double: null<br />
string: null<br />
optional: null<br />
collection: null<br />
map: null
methods ---- <br />
integer: 0<br />
array: [J@64c64813<br />
double: 0.0<br />
string: null<br />
optional: Optional.empty<br />
collection: [], class java.util.Collections$EmptyList<br />
map: {}, class java.util.Collections$EmptyMap
</blockquote>
<br/>
JMockit 对于属于默认值的处理没什么意外。被 Mock 的方法返回值也存在一个映射关系，那就是 <a href="https://github.com/jmockit/jmockit2/blob/master/src/org/jmockit/internal/util/DefaultValues.java">jmockit.internal.util.DefaultValues.java</a>, 点开链接，打开源码，看个究竟。其中的映射比 Mockito 还更为明白，此处拒绝贴出 DefaultValues 的源代码。
